<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Vera Monteagudo (vemonse@alumni.uv.es)">
<meta name="description" content="Cómo el nivel de ingresos afectan a nuestra felicidad.">
<title>Cómo somos de felices - La felicidad en relación a la renta</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="././imagenes/feliz.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": true,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "Sin resultados",
    "search-matching-documents-text": "documentos encontrados",
    "search-copy-link-title": "Copiar el enlace en la búsqueda",
    "search-hide-matches-text": "Ocultar resultados adicionales",
    "search-more-match-text": "resultado adicional en este documento",
    "search-more-matches-text": "resultados adicionales en este documento",
    "search-clear-button-title": "Borrar",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar"
  }
}</script><style>html{ scroll-behavior: smooth; }</style>
<style>
    .quarto-title-block .quarto-title-banner {
      color: white;
    }
    </style>
<script src="site_libs/htmlwidgets-1.5.4/htmlwidgets.js"></script><script src="site_libs/plotly-binding-4.10.0/plotly.js"></script><script src="site_libs/typedarray-0.1/typedarray.min.js"></script><script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><link href="site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><link href="site_libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="site_libs/plotly-main-2.5.1/plotly-latest.min.js"></script><link href="site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="site_libs/datatables-binding-0.25/datatables.js"></script><link href="site_libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="site_libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="site_libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script><link rel="stylesheet" href="my_styles.css">
</head>
<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg navbar-dark "><div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="././imagenes/feliz.png" alt="" class="navbar-logo"></a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Cómo somos de felices</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item compact">
    <a class="nav-link" href="./index.html"><i class="bi bi-house-door" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
<ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item">
    <a class="nav-link active" href="./my_trabajo_BigData.html" aria-current="page">
 <span class="menu-text">Trabajo individual</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/vemonse"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/<tu-usuario-twitter>"><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:%20vemonse@alumni.uv.es"><i class="bi bi-envelope" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
<div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full"><div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-page-right">
      <div class="quarto-title-block"><div><h1 class="title">La felicidad en relación a la renta</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Código</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Mostrar todo el código</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Ocultar todo el código</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">Ver el código fuente</a></li></ul></div></div>
                  <div>
        <div class="description">
          <p>Cómo el nivel de ingresos afectan a nuestra felicidad.</p>
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">Felicidad</div>
                <div class="quarto-category">PIB</div>
                <div class="quarto-category">Desigualdad</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Autor/a</div>
      <div class="quarto-title-meta-contents">
               <p>Vera Monteagudo (vemonse@alumni.uv.es) </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Fecha de publicación</div>
      <div class="quarto-title-meta-contents">
        <p class="date">8 de enero de 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto"><nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">En esta página</h2>
   
  <ul>
<li><a href="#introducci%C3%B3n" id="toc-introducción" class="nav-link active" data-scroll-target="#introducci%C3%B3n">Introducción</a></li>
  <li><a href="#datos-del-trabajo" id="toc-datos-del-trabajo" class="nav-link" data-scroll-target="#datos-del-trabajo">Datos del trabajo</a></li>
  <li>
<a href="#an%C3%A1lisis-de-los-datos" id="toc-análisis-de-los-datos" class="nav-link" data-scroll-target="#an%C3%A1lisis-de-los-datos">Análisis de los datos</a>
  <ul class="collapse">
<li><a href="#regiones-m%C3%A1s-felices." id="toc-regiones-más-felices." class="nav-link" data-scroll-target="#regiones-m%C3%A1s-felices.">Regiones más felices.</a></li>
  <li><a href="#los-datos-en-n%C3%BAmeros" id="toc-los-datos-en-números" class="nav-link" data-scroll-target="#los-datos-en-n%C3%BAmeros">Los datos en números</a></li>
  <li>
<a href="#correlaci%C3%B3n-entre-pib-y-felicidad" id="toc-correlación-entre-pib-y-felicidad" class="nav-link" data-scroll-target="#correlaci%C3%B3n-entre-pib-y-felicidad">Correlación entre PIB y felicidad</a>
  <ul class="collapse">
<li><a href="#ahora-por-regiones" id="toc-ahora-por-regiones" class="nav-link" data-scroll-target="#ahora-por-regiones">Ahora por regiones</a></li>
  </ul>
</li>
  <li><a href="#desigualdad-y-felicidad-por-pa%C3%ADses" id="toc-desigualdad-y-felicidad-por-países" class="nav-link" data-scroll-target="#desigualdad-y-felicidad-por-pa%C3%ADses">Desigualdad y felicidad por países</a></li>
  </ul>
</li>
  <li>
<a href="#conclusiones" id="toc-conclusiones" class="nav-link" data-scroll-target="#conclusiones">Conclusiones</a>
  <ul class="collapse">
<li><a href="#informaci%C3%B3n-sobre-la-sesi%C3%B3n" id="toc-información-sobre-la-sesión" class="nav-link" data-scroll-target="#informaci%C3%B3n-sobre-la-sesi%C3%B3n">Información sobre la sesión</a></li>
  </ul>
</li>
  </ul></nav>
</nav><!-- margin-sidebar --><div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block column-page-right" id="quarto-document-content"><section id="introducción" class="level1"><h1>Introducción</h1>
<p>¿Cómo somos de felices?, ¿Cómo afectan los ingresos, el PIB o la desigualdad en la percepción que tenemos de felicidad?. Pues precisamente de esto es de lo que vamos a hablar aquí, veremos si exsiste una fórmula precisa de poder medir las causas de la felicidad de la gente… o no. Veremos también las correlaciones entre las felicidad y los ingresos, así como la correlación con la desigualdad, y si esto es determinante para poder sacar una conclusión sólida acerca de los niveles de felicidad.</p>
</section><section id="datos-del-trabajo" class="level1"><h1>Datos del trabajo</h1>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Datos usados</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Código</a></li>
</ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p>Los datos que hemos utilizado para este trabajo provienen de la página Kaggle. Esta pagina es una comunidad online de profesionales y científicos de datos. Página recomendable para buscar datos acerca de temas relacionados con R. Por si la queréis usar para hacer otros trabajos pincha <a href="https://www.kaggle.com/">aquí</a>.</p>
<p>Vamos a utilizar datos de un paquete dentro de Kaggle .La página web del paquete está <a href="https://www.kaggle.com/datasets/levyedgar44/income-and-happiness-correction">aquí</a>.</p>
<p>El dataset contiene observaciones sobre un conjunto de datos que reflejan la relación entre la renta y la felicidad de 111 países. Por tanto, vamos a analizar los datos y veremos las relaciones que guardan.</p>
<p>Bibliografía: Kaggle y web de la asignatura.</p>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell" data-layout-align="center">
<details open=""><summary>Código</summary><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="co">#| echo:false</span></span>
<span id="cb1-3"><a href="#cb1-3"></a></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="fu">library</span>(rio)</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="fu">library</span>(forcats)</span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="fu">library</span>(ggThemeAssist)</span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="fu">library</span>(janitor)</span>
<span id="cb1-10"><a href="#cb1-10"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-11"><a href="#cb1-11"></a><span class="fu">library</span>(plotly)</span>
<span id="cb1-12"><a href="#cb1-12"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb1-13"><a href="#cb1-13"></a><span class="fu">library</span>(ggThemeAssist)</span>
<span id="cb1-14"><a href="#cb1-14"></a><span class="fu">library</span>(rnaturalearth)</span>
<span id="cb1-15"><a href="#cb1-15"></a><span class="fu">library</span>(rnaturalearthdata)</span>
<span id="cb1-16"><a href="#cb1-16"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb1-17"><a href="#cb1-17"></a><span class="fu">library</span>(viridis)</span>
<span id="cb1-18"><a href="#cb1-18"></a><span class="fu">library</span>(highcharter)</span>
<span id="cb1-19"><a href="#cb1-19"></a><span class="fu">library</span>(treemapify)</span>
<span id="cb1-20"><a href="#cb1-20"></a><span class="fu">library</span>(treemap)</span>
<span id="cb1-21"><a href="#cb1-21"></a></span>
<span id="cb1-22"><a href="#cb1-22"></a></span>
<span id="cb1-23"><a href="#cb1-23"></a><span class="co">#fs::dir_create("datos")</span></span>
<span id="cb1-24"><a href="#cb1-24"></a></span>
<span id="cb1-25"><a href="#cb1-25"></a><span class="co">#importamos los datos de la carpeta datos</span></span>
<span id="cb1-26"><a href="#cb1-26"></a></span>
<span id="cb1-27"><a href="#cb1-27"></a>happy <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(<span class="st">"./datos/happyscore_income.csv"</span>)</span>
<span id="cb1-28"><a href="#cb1-28"></a></span>
<span id="cb1-29"><a href="#cb1-29"></a><span class="co">#limpiar nombres</span></span>
<span id="cb1-30"><a href="#cb1-30"></a></span>
<span id="cb1-31"><a href="#cb1-31"></a>feliz <span class="ot">&lt;-</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>(happy)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
<hr></section><section id="análisis-de-los-datos" class="level1"><h1>Análisis de los datos</h1>
<section id="regiones-más-felices." class="level2"><h2 class="anchored" data-anchor-id="regiones-más-felices.">Regiones más felices.</h2>
<p>Para comenzar con el análisis lo primero que debemos observar es el siguiente ránking, en este caso, de las regiones más felices. Las diferentes regiones están agrupadas por los datos de los países pertenecientes a dichas regiones, por tanto los 111 países de los que disponemos datos hacen la media del índice resultante por cada región. Por otro lado, las barras del gráfico están ordenadas de mayor a menor índice de felicidad en una escala de 0 a 7,5. Tal como podemos ver, la región que lidera el índice como región más feliz es la región de Autralia y Nueva Zelanda, seguido de la de Norte América. Mientras que la región a la cola del índice es el África Subsahariana. Por otra parte, cabe mencionar que la región en la que se encuentra España no está mal situada en el ránking, pues es la tercera, “Western Europe”, o como se dice en español, Europa Occidental.</p>
<div class="cell" data-layout-align="center">
<details open=""><summary>Código</summary><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="co">#| echo:false</span></span>
<span id="cb2-3"><a href="#cb2-3"></a></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co">#cargamos paquetes</span></span>
<span id="cb2-5"><a href="#cb2-5"></a></span>
<span id="cb2-6"><a href="#cb2-6"></a></span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="fu">library</span>(rio)</span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="fu">library</span>(forcats)</span>
<span id="cb2-10"><a href="#cb2-10"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb2-11"><a href="#cb2-11"></a><span class="fu">library</span>(ggThemeAssist)</span>
<span id="cb2-12"><a href="#cb2-12"></a><span class="fu">library</span>(janitor)</span>
<span id="cb2-13"><a href="#cb2-13"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb2-14"><a href="#cb2-14"></a><span class="fu">library</span>(plotly)</span>
<span id="cb2-15"><a href="#cb2-15"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb2-16"><a href="#cb2-16"></a><span class="fu">library</span>(ggThemeAssist)</span>
<span id="cb2-17"><a href="#cb2-17"></a><span class="fu">library</span>(rnaturalearth)</span>
<span id="cb2-18"><a href="#cb2-18"></a><span class="fu">library</span>(rnaturalearthdata)</span>
<span id="cb2-19"><a href="#cb2-19"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb2-20"><a href="#cb2-20"></a><span class="fu">library</span>(viridis)</span>
<span id="cb2-21"><a href="#cb2-21"></a><span class="fu">library</span>(highcharter)</span>
<span id="cb2-22"><a href="#cb2-22"></a><span class="fu">library</span>(treemapify)</span>
<span id="cb2-23"><a href="#cb2-23"></a><span class="fu">library</span>(treemap)</span>
<span id="cb2-24"><a href="#cb2-24"></a></span>
<span id="cb2-25"><a href="#cb2-25"></a><span class="co">#importamos los datos</span></span>
<span id="cb2-26"><a href="#cb2-26"></a></span>
<span id="cb2-27"><a href="#cb2-27"></a><span class="co">#fs::dir_create("datos")</span></span>
<span id="cb2-28"><a href="#cb2-28"></a></span>
<span id="cb2-29"><a href="#cb2-29"></a><span class="co">#importamos los datos de la carpeta datos</span></span>
<span id="cb2-30"><a href="#cb2-30"></a></span>
<span id="cb2-31"><a href="#cb2-31"></a>happy <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(<span class="st">"./datos/happyscore_income.csv"</span>)</span>
<span id="cb2-32"><a href="#cb2-32"></a></span>
<span id="cb2-33"><a href="#cb2-33"></a><span class="co">#limpiar nombres</span></span>
<span id="cb2-34"><a href="#cb2-34"></a></span>
<span id="cb2-35"><a href="#cb2-35"></a>feliz <span class="ot">&lt;-</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>(happy)</span>
<span id="cb2-36"><a href="#cb2-36"></a></span>
<span id="cb2-37"><a href="#cb2-37"></a></span>
<span id="cb2-38"><a href="#cb2-38"></a><span class="co">#Primer grafico (columnas)</span></span>
<span id="cb2-39"><a href="#cb2-39"></a></span>
<span id="cb2-40"><a href="#cb2-40"></a><span class="co">#hacer tabla</span></span>
<span id="cb2-41"><a href="#cb2-41"></a></span>
<span id="cb2-42"><a href="#cb2-42"></a>tabla_1 <span class="ot">&lt;-</span> feliz <span class="sc">%&gt;%</span></span>
<span id="cb2-43"><a href="#cb2-43"></a>           <span class="fu">select</span> (region, happy_score)<span class="sc">%&gt;%</span></span>
<span id="cb2-44"><a href="#cb2-44"></a>           <span class="fu">group_by</span>(region)<span class="sc">%&gt;%</span></span>
<span id="cb2-45"><a href="#cb2-45"></a>           <span class="fu">summarise</span>(<span class="at">media_felicidad_region =</span> <span class="fu">mean</span>(happy_score)) <span class="sc">%&gt;%</span></span>
<span id="cb2-46"><a href="#cb2-46"></a>           <span class="fu">mutate</span>(<span class="at">region =</span> <span class="fu">as_factor</span>(region)) <span class="sc">%&gt;%</span></span>
<span id="cb2-47"><a href="#cb2-47"></a>           <span class="fu">mutate</span>(<span class="at">region =</span> <span class="fu">fct_reorder</span>(region,media_felicidad_region))<span class="sc">%&gt;%</span></span>
<span id="cb2-48"><a href="#cb2-48"></a>           <span class="fu">ungroup</span>()</span>
<span id="cb2-49"><a href="#cb2-49"></a></span>
<span id="cb2-50"><a href="#cb2-50"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(tabla_1 , <span class="fu">aes</span>( media_felicidad_region , region )) <span class="sc">+</span> <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">"khaki1"</span>) <span class="sc">+</span> <span class="fu">lims</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">7.5</span>))</span>
<span id="cb2-51"><a href="#cb2-51"></a></span>
<span id="cb2-52"><a href="#cb2-52"></a>p1 <span class="ot">&lt;-</span> p1 <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">linetype =</span> <span class="st">"blank"</span>),</span>
<span id="cb2-53"><a href="#cb2-53"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_line</span>(<span class="at">linetype =</span> <span class="st">"blank"</span>),</span>
<span id="cb2-54"><a href="#cb2-54"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"AvantGarde"</span>,</span>
<span id="cb2-55"><a href="#cb2-55"></a>        <span class="at">size =</span> <span class="dv">20</span>, <span class="at">face =</span> <span class="st">"italic"</span>, <span class="at">colour =</span> <span class="st">"aquamarine4"</span>),</span>
<span id="cb2-56"><a href="#cb2-56"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"AvantGarde"</span>,</span>
<span id="cb2-57"><a href="#cb2-57"></a>    <span class="at">size =</span> <span class="dv">10</span>, <span class="at">face =</span> <span class="st">"italic"</span>, <span class="at">colour=</span> <span class="st">"aquamarine4"</span>),</span>
<span id="cb2-58"><a href="#cb2-58"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NA</span>)) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"MEDIA DE LA FELICIDAD POR REGIONES "</span>, <span class="at">subtitle =</span> <span class="st">"Media en escala 0 - 7,5"</span>,</span>
<span id="cb2-59"><a href="#cb2-59"></a>    <span class="at">x =</span> <span class="st">"Media felicidad (0 - 7.5)"</span>, <span class="at">y =</span> <span class="cn">NULL</span>)</span>
<span id="cb2-60"><a href="#cb2-60"></a></span>
<span id="cb2-61"><a href="#cb2-61"></a><span class="fu">ggplotly</span>(p1)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div id="htmlwidget-d1e94a156917a86a3f60" style="width:95%;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-d1e94a156917a86a3f60">{"x":{"data":[{"orientation":"v","width":[7.284,5.34769565217391,5.33366666666667,6.224125,5.4096,7.273,5.25028571428571,4.6476,4.1965,6.76236842105263],"base":[9.55,4.55,3.55,6.55,5.55,8.55,2.55,1.55,0.55,7.55],"x":[3.642,2.67384782608696,2.66683333333333,3.1120625,2.7048,3.6365,2.62514285714286,2.3238,2.09825,3.38118421052632],"y":[0.899999999999999,0.9,0.9,0.9,0.9,0.899999999999999,0.9,0.9,0.9,0.899999999999999],"text":["media_felicidad_region: 7.284000<br />region: 'Australia and New Zealand'","media_felicidad_region: 5.347696<br />region: 'Central and Eastern Europe'","media_felicidad_region: 5.333667<br />region: 'Eastern Asia'","media_felicidad_region: 6.224125<br />region: 'Latin America and Caribbean'","media_felicidad_region: 5.409600<br />region: 'Middle East and Northern Africa'","media_felicidad_region: 7.273000<br />region: 'North America'","media_felicidad_region: 5.250286<br />region: 'Southeastern Asia'","media_felicidad_region: 4.647600<br />region: 'Southern Asia'","media_felicidad_region: 4.196500<br />region: 'Sub-Saharan Africa'","media_felicidad_region: 6.762368<br />region: 'Western Europe'"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(255,246,143,1)","line":{"width":null,"color":"transparent"}},"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":52.7953507679535,"r":7.30593607305936,"b":40.1826484018265,"l":203.835616438356},"plot_bgcolor":"transparent","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"<i> MEDIA DE LA FELICIDAD POR REGIONES  <\/i>","font":{"color":"rgba(69,139,116,1)","family":"AvantGarde","size":26.5670402656704},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.375,7.875],"tickmode":"array","ticktext":["0","2","4","6"],"tickvals":[0,2,4,6],"categoryorder":"array","categoryarray":["0","2","4","6"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"Media felicidad (0 - 7.5)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,10.6],"tickmode":"array","ticktext":["'Sub-Saharan Africa'","'Southern Asia'","'Southeastern Asia'","'Eastern Asia'","'Central and Eastern Europe'","'Middle East and Northern Africa'","'Latin America and Caribbean'","'Western Europe'","'North America'","'Australia and New Zealand'"],"tickvals":[1,2,3,4,5,6,7,8,9,10],"categoryorder":"array","categoryarray":["'Sub-Saharan Africa'","'Southern Asia'","'Southeastern Asia'","'Eastern Asia'","'Central and Eastern Europe'","'Middle East and Northern Africa'","'Latin America and Caribbean'","'Western Europe'","'North America'","'Australia and New Zealand'"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"104453cb63e3":{"x":{},"y":{},"type":"bar"}},"cur_data":"104453cb63e3","visdat":{"104453cb63e3":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section><section id="los-datos-en-números" class="level2"><h2 class="anchored" data-anchor-id="los-datos-en-números">Los datos en números</h2>
<p>En la siguiente tabla podemos ver parte de los datos en los que se basa el estudio, de izquierda a derecha nos encontramos con los países en primer lugar, seguido del índice de felicidad (escala 0-7.5), media de los ingresos (escala 0-30.000), mediana de los ingresos y desigualdad de ingreso (escala 20-65). Además podemos ver la diferencia entre la media y la mediana para ver como de “fiable” es la media y que no se encuentre desvirtuada por un número reducido de grandes rentas que eleve la media. Analizando un poco la tabla vemos como los países con menor índice de felicidad, son países con rentas muy bajas, pero aunque guarden una correlación positiva, cabe destacar que esto no implica causalidad, ya que por otro lado podemos observar como Costa Rica, con una media de ingresos bastante baja, es uno de los países con mayor índice de felicidad, o en el otro extremo podemos ver Luxemburgo, donde pese a poseer la media de ingresos más eleveados ni siquiera llega a un 7 en el índice de felicidad. Así que, resumiendo, pese que haya fuertes correlaciones entre diferentes variables, siempre hay que tener en cuenta otros factores a la hora de analizar las causas, en este caso del índice de felicidad, y explicarlas correctamente.</p>
<div class="cell" data-layout-align="center">
<details open=""><summary>Código</summary><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="co">#| echo:false</span></span>
<span id="cb3-3"><a href="#cb3-3"></a></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="fu">library</span>(rio)</span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="fu">library</span>(forcats)</span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="fu">library</span>(ggThemeAssist)</span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="fu">library</span>(janitor)</span>
<span id="cb3-10"><a href="#cb3-10"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb3-11"><a href="#cb3-11"></a><span class="fu">library</span>(plotly)</span>
<span id="cb3-12"><a href="#cb3-12"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb3-13"><a href="#cb3-13"></a><span class="fu">library</span>(ggThemeAssist)</span>
<span id="cb3-14"><a href="#cb3-14"></a><span class="fu">library</span>(rnaturalearth)</span>
<span id="cb3-15"><a href="#cb3-15"></a><span class="fu">library</span>(rnaturalearthdata)</span>
<span id="cb3-16"><a href="#cb3-16"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb3-17"><a href="#cb3-17"></a><span class="fu">library</span>(viridis)</span>
<span id="cb3-18"><a href="#cb3-18"></a><span class="fu">library</span>(highcharter)</span>
<span id="cb3-19"><a href="#cb3-19"></a><span class="fu">library</span>(treemapify)</span>
<span id="cb3-20"><a href="#cb3-20"></a><span class="fu">library</span>(treemap)</span>
<span id="cb3-21"><a href="#cb3-21"></a></span>
<span id="cb3-22"><a href="#cb3-22"></a></span>
<span id="cb3-23"><a href="#cb3-23"></a><span class="co">#fs::dir_create("datos")</span></span>
<span id="cb3-24"><a href="#cb3-24"></a></span>
<span id="cb3-25"><a href="#cb3-25"></a><span class="co">#importamos los datos de la carpeta datos</span></span>
<span id="cb3-26"><a href="#cb3-26"></a></span>
<span id="cb3-27"><a href="#cb3-27"></a>happy <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(<span class="st">"./datos/happyscore_income.csv"</span>)</span>
<span id="cb3-28"><a href="#cb3-28"></a></span>
<span id="cb3-29"><a href="#cb3-29"></a><span class="co">#limpiar nombres</span></span>
<span id="cb3-30"><a href="#cb3-30"></a></span>
<span id="cb3-31"><a href="#cb3-31"></a>feliz <span class="ot">&lt;-</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>(happy)</span>
<span id="cb3-32"><a href="#cb3-32"></a></span>
<span id="cb3-33"><a href="#cb3-33"></a><span class="co">#TABLA</span></span>
<span id="cb3-34"><a href="#cb3-34"></a></span>
<span id="cb3-35"><a href="#cb3-35"></a>tabla_t <span class="ot">&lt;-</span> feliz <span class="sc">%&gt;%</span></span>
<span id="cb3-36"><a href="#cb3-36"></a>           <span class="fu">select</span>(country, happy_score,avg_income,median_income,income_inequality)<span class="sc">%&gt;%</span></span>
<span id="cb3-37"><a href="#cb3-37"></a>           <span class="fu">mutate</span>(<span class="at">diferencia_media_mediana =</span> avg_income<span class="sc">-</span>median_income, <span class="at">.before =</span> income_inequality) <span class="sc">%&gt;%</span></span>
<span id="cb3-38"><a href="#cb3-38"></a>  <span class="fu">mutate_if</span>(is.numeric, <span class="fu">funs</span>(<span class="fu">round</span>(., <span class="dv">2</span>)))</span>
<span id="cb3-39"><a href="#cb3-39"></a></span>
<span id="cb3-40"><a href="#cb3-40"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(tabla_t)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div id="htmlwidget-1a07b39c486e28cc5195" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-1a07b39c486e28cc5195">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111"],["Armenia","Angola","Argentina","Austria","Australia","Azerbaijan","Bangladesh","Belgium","Burkina Faso","Bulgaria","Burundi","Benin","Bolivia","Brazil","Botswana","Belarus","Canada","Switzerland","Chile","Cameroon","China","Colombia","Costa Rica","Cyprus","Czech Republic","Germany","Djibouti","Denmark","Dominican Republic","Ecuador","Estonia","Spain","Ethiopia","Finland","France","Gabon","United Kingdom","Georgia","Ghana","Greece","Honduras","Croatia","Hungary","Indonesia","Ireland","Israel","India","Iran","Iceland","Italy","Japan","Kenya","Kyrgyzstan","Cambodia","Kosovo","Kazakhstan","Laos","Sri Lanka","Liberia","Lesotho","Lithuania","Luxembourg","Latvia","Morocco","Moldova","Madagascar","Mali","Mongolia","Mauritania","Mauritius","Mexico","Malaysia","Mozambique","Niger","Nigeria","Nicaragua","Netherlands","Norway","Nepal","Panama","Peru","Philippines","Pakistan","Poland","Portugal","Paraguay","Romania","Serbia","Russia","Rwanda","Sweden","Slovenia","Slovakia","Sierra Leone","Senegal","El Salvador","Chad","Togo","Thailand","Tajikistan","Tunisia","Turkey","Tanzania","Ukraine","Uganda","United States","Uruguay","Vietnam","South Africa","Zambia","Zimbabwe"],[4.35,4.03,6.57,7.2,7.28,5.21,4.69,6.94,3.59,4.22,2.9,3.34,5.89,6.98,4.33,5.81,7.43,7.59,6.67,4.25,5.14,6.48,7.23,5.69,6.5,6.75,4.37,7.53,4.88,5.97,5.43,6.33,4.51,7.41,6.58,3.9,6.87,4.3,4.63,4.86,4.79,5.76,4.8,5.4,6.94,7.28,4.57,4.69,7.56,5.95,5.99,4.42,5.29,3.82,5.59,5.86,4.88,4.27,4.57,4.9,5.83,6.95,5.1,5.01,5.89,3.68,4,4.87,4.44,5.48,7.19,5.77,4.97,3.85,5.27,5.83,7.38,7.52,4.51,6.79,5.82,5.07,5.19,5.79,5.1,5.88,5.12,5.12,5.72,3.46,7.36,5.85,6,4.51,3.9,6.13,3.67,2.84,6.46,4.79,4.74,5.33,3.78,4.68,3.93,7.12,6.48,5.36,4.64,5.13,4.61],[2096.76,1448.88,7101.12,19457.04,19917,3381.6,1265.34,17168.51,870.84,5354.82,572.88,989.04,3985.71,5567.24,3484.68,5453.93,20190.78,23400.04,7557.99,1490.52,2673.64,4618.06,6901.47,10493.96,9430.9,19285.96,1875.24,17496.51,4430.76,3835.65,7906.73,13842.99,1050.72,17310.2,18096.79,2520.96,17099.55,1957.27,1577.04,11507.56,3080.44,7828.08,6903.88,1541.75,16657.77,10645.24,1357.85,5215.04,18828.35,15437.6,14542.8,1492.68,1852.64,1868.72,2627.01,3555.09,1491.72,2558.28,653.04,908.64,6789.16,26182.28,6722.9,2864.88,3077.28,574.2,903.3,3181.8,1922.64,4120.5,4148,7286.82,714.72,718.4,910.32,2419.2,18234.43,21877.71,1428.12,6250.36,4312.67,2224.46,1463.86,6582.47,9982.88,4938.52,3174.15,4629.91,7647.2,946.52,17032.76,12174.76,7986.4,850.08,1135.08,3410.89,1177.68,936.36,4792.5,1497.03,3251.28,5242.67,941.4,4129.68,1126.48,23127,7544.4,2231.4,3889.32,956.76,1768.56],[1731.51,1044.24,5109.4,16879.62,15846.06,2931.48,994.14,15166.46,630.24,4523.56,436.92,657,2584.47,3294.18,1632.6,4814.45,16829.1,19442.92,4448.01,1030.08,2108.13,2618.67,4373.52,8624.3,8363.37,16291.26,1348.74,15630.89,2836.45,2435.27,6540.13,11782.4,857.16,14962.56,14971.25,1791.48,14172.74,1483.77,1148.28,9776.48,1757.84,6622.11,6056.72,1161.07,13823.16,8234.68,1042.2,3961,16179.32,13163.07,12541.08,949.08,1530.13,1437.38,2224.68,3025.48,1118.94,1862.36,528.72,532.92,5598.36,22240.23,5438.21,2064.48,2547.41,415.48,695.34,2565.72,1567.2,3222.78,2646.97,4930.68,488.52,535.56,649.2,1632.88,15880.55,19477.62,1155,3814.21,2951.13,1472.4,1174.37,5451.25,7800.65,3136.04,2741.37,3992.5,5520.98,549.44,15166.61,11071.99,7180.3,669.36,850.02,2366.28,876.6,636,3523.54,1260.69,2572.56,4018.68,693.3,3643.52,780.16,17925.36,5269.23,1643.58,1506.4,510.06,1230.6],[365.25,404.64,1991.72,2577.42,4070.94,450.12,271.2,2002.05,240.6,831.26,135.96,332.04,1401.24,2273.05,1852.08,639.48,3361.68,3957.12,3109.98,460.44,565.51,1999.39,2527.95,1869.66,1067.53,2994.7,526.5,1865.62,1594.31,1400.39,1366.59,2060.6,193.56,2347.64,3125.54,729.48,2926.82,473.49,428.76,1731.09,1322.6,1205.97,847.17,380.68,2834.61,2410.56,315.65,1254.04,2649.03,2274.53,2001.72,543.6,322.51,431.34,402.33,529.61,372.78,695.92,124.32,375.72,1190.8,3942.04,1284.69,800.4,529.87,158.72,207.96,616.08,355.44,897.72,1501.03,2356.14,226.2,182.84,261.12,786.32,2353.89,2400.09,273.12,2436.15,1361.53,752.06,289.49,1131.22,2182.23,1802.48,432.78,637.41,2126.22,397.08,1866.15,1102.77,806.1,180.72,285.06,1044.61,301.08,300.36,1268.96,236.34,678.72,1223.99,248.1,486.16,346.32,5201.64,2275.17,587.82,2382.92,446.7,537.96],[31.45,42.72,45.48,30.3,35.28,24.22,32.67,28.75,39.76,34.16,33.36,43.44,51.61,54.33,60.46,27.75,33.79,32.93,51.27,42.82,37.58,54.82,49.02,31.84,26.41,31.54,44.63,28.16,48.42,50.1,32.53,34.62,33.17,27.72,32.26,42.18,34.43,40.89,42.77,35,55.81,32.01,29.56,34.91,32.42,41.94,34.92,39.24,28.78,34.13,32.11,48.51,31.04,34.46,30.08,28.42,37.26,38.6,36.48,54.18,35.12,31.95,36.33,40.72,32.67,40.72,35.98,34.13,35.69,35.75,48.97,46.16,45.58,37.73,42.97,45.8,29.27,27.31,32.84,52.66,48.1,44.77,31.2,33.59,36.63,50.97,32.05,29.73,41.24,51.27,26.95,24.68,27.06,33.99,39.75,44.82,43.32,44.12,39.45,30.97,36.77,39.76,39.03,26.27,42.72,41.09,45.01,39.24,63.73,55.12,43.15]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>country<\/th>\n      <th>happy_score<\/th>\n      <th>avg_income<\/th>\n      <th>median_income<\/th>\n      <th>diferencia_media_mediana<\/th>\n      <th>income_inequality<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,3,4,5,6]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section><section id="correlación-entre-pib-y-felicidad" class="level2"><h2 class="anchored" data-anchor-id="correlación-entre-pib-y-felicidad">Correlación entre PIB y felicidad</h2>
<p>Tal como veníamos hablando, existe una correlación positiva entre el nivel de ingresos y la felicidad, y la mejor forma de entenderlo es viéndolo. En el siguiente gráfico podemos observar como a medida que aumenta el PIB de los países, aumenta también el índice de felicidad. Por lo que, aunque sí es cierto que hay diferentes factores que explican el ratio de felicidad y no solo nos podemos centrar en una variable explicativa, existe una tendencia clara entre el PIB y la felicidad, es decir, un PIB mayor y todo lo que eso conlleva, mejor educación; mejores sistemas sanitarios; mejores infraestructuras o mayores oportunidades laborales; etc, hace que el índice de felicidad aumente a medida que aumenta el PIB. Obviamente no será esta variable la única causa explicativa, ya que, por ejemplo, podrán haber países con PIB muy elevados pero que en cambio existan grandes desigualdades.</p>
<div class="cell" data-layout-align="center">
<details open=""><summary>Código</summary><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="co">#| echo:false</span></span>
<span id="cb4-3"><a href="#cb4-3"></a></span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="co">#cargamos paquetes</span></span>
<span id="cb4-5"><a href="#cb4-5"></a></span>
<span id="cb4-6"><a href="#cb4-6"></a></span>
<span id="cb4-7"><a href="#cb4-7"></a><span class="fu">library</span>(rio)</span>
<span id="cb4-8"><a href="#cb4-8"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb4-9"><a href="#cb4-9"></a><span class="fu">library</span>(forcats)</span>
<span id="cb4-10"><a href="#cb4-10"></a><span class="fu">library</span> (ggthemes)</span>
<span id="cb4-11"><a href="#cb4-11"></a><span class="fu">library</span>(ggThemeAssist)</span>
<span id="cb4-12"><a href="#cb4-12"></a><span class="fu">library</span>(janitor)</span>
<span id="cb4-13"><a href="#cb4-13"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb4-14"><a href="#cb4-14"></a><span class="fu">library</span>(plotly)</span>
<span id="cb4-15"><a href="#cb4-15"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb4-16"><a href="#cb4-16"></a><span class="fu">library</span>(ggThemeAssist)</span>
<span id="cb4-17"><a href="#cb4-17"></a><span class="fu">library</span>(rnaturalearth)</span>
<span id="cb4-18"><a href="#cb4-18"></a><span class="fu">library</span>(rnaturalearthdata)</span>
<span id="cb4-19"><a href="#cb4-19"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb4-20"><a href="#cb4-20"></a><span class="fu">library</span>(viridis)</span>
<span id="cb4-21"><a href="#cb4-21"></a><span class="fu">library</span>(highcharter)</span>
<span id="cb4-22"><a href="#cb4-22"></a><span class="fu">library</span>(treemapify)</span>
<span id="cb4-23"><a href="#cb4-23"></a><span class="fu">library</span>(treemap)</span>
<span id="cb4-24"><a href="#cb4-24"></a></span>
<span id="cb4-25"><a href="#cb4-25"></a><span class="co">#importamos los datos</span></span>
<span id="cb4-26"><a href="#cb4-26"></a></span>
<span id="cb4-27"><a href="#cb4-27"></a><span class="co">#fs::dir_create("datos")</span></span>
<span id="cb4-28"><a href="#cb4-28"></a></span>
<span id="cb4-29"><a href="#cb4-29"></a><span class="co">#importamos los datos de la carpeta datos</span></span>
<span id="cb4-30"><a href="#cb4-30"></a></span>
<span id="cb4-31"><a href="#cb4-31"></a>happy <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(<span class="st">"./datos/happyscore_income.csv"</span>)</span>
<span id="cb4-32"><a href="#cb4-32"></a></span>
<span id="cb4-33"><a href="#cb4-33"></a><span class="co">#limpiar nombres</span></span>
<span id="cb4-34"><a href="#cb4-34"></a></span>
<span id="cb4-35"><a href="#cb4-35"></a>feliz <span class="ot">&lt;-</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>(happy)</span>
<span id="cb4-36"><a href="#cb4-36"></a></span>
<span id="cb4-37"><a href="#cb4-37"></a><span class="co">#Hacemos la tabla</span></span>
<span id="cb4-38"><a href="#cb4-38"></a></span>
<span id="cb4-39"><a href="#cb4-39"></a>tabla_2 <span class="ot">&lt;-</span> feliz <span class="sc">%&gt;%</span></span>
<span id="cb4-40"><a href="#cb4-40"></a>  <span class="fu">select</span> (region, happy_score, gdp, country)</span>
<span id="cb4-41"><a href="#cb4-41"></a></span>
<span id="cb4-42"><a href="#cb4-42"></a><span class="co">#hacer gráfico_2.1</span></span>
<span id="cb4-43"><a href="#cb4-43"></a></span>
<span id="cb4-44"><a href="#cb4-44"></a>p2_1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(tabla_2 , <span class="fu">aes</span>(<span class="at">x =</span> gdp, <span class="at">y =</span> happy_score)) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color=</span> region)) <span class="sc">+</span> <span class="fu">geom_smooth</span>()</span>
<span id="cb4-45"><a href="#cb4-45"></a></span>
<span id="cb4-46"><a href="#cb4-46"></a></span>
<span id="cb4-47"><a href="#cb4-47"></a>p2_1 <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"AvantGarde"</span>),</span>
<span id="cb4-48"><a href="#cb4-48"></a>           <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"AvantGarde"</span>, <span class="at">face =</span> <span class="st">"bold"</span>), <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"whitesmoke"</span>,    <span class="at">linetype =</span> <span class="st">"dotted"</span>)) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"ÍNDICE FELICIDAD EN RELACIÓN AL PIB"</span>, <span class="at">x =</span> <span class="st">"PIB (0 - 1.6)"</span>, <span class="at">y =</span> <span class="st">"Índice felicidad (2.5 - 8)"</span>,<span class="at">colour =</span> <span class="st">"Regiones"</span>) </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="my_trabajo_BigData_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" style="width:95.0%"></p>
</figure>
</div>
</div>
</div>
<section id="ahora-por-regiones" class="level3"><h3 class="anchored" data-anchor-id="ahora-por-regiones">Ahora por regiones</h3>
<p>Siguiendo con la línea de la correlación entre PIB y felicidad, en el siguiente gráfico podemos ver lo mismo que en el de arriba pero dividido por regiones para poder ver con mayor detalle la correlación que hay entre el PIB y el índice de felicidad en cada región. Separando el gráfico por regiones podemos observar por ejemplo como en la región de Europa Occidental un aumento del PIB supone un aumento mayor al proporcional de la felicidad. Tambíen vemos otro caso llamativo, que es la región de Asia del Sur(“Southern Asia”), donde precisamente en esta región existe una correlación negativa, pues a medida que aumenta el PIB disminuye la felicidad, esto nos muestra el ejemplo perfecto de que aunque hayamos visto en el otro gráfico que existía una correlación general positiva, esta no explica causalidad, ya que Asia del Sur rompe así la hipótesis de que el PIB sea el causante directo, o única varible explicativa, del aumento de la felicidad.</p>
<div class="cell" data-layout-align="center">
<details open=""><summary>Código</summary><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="co">#| echo:false</span></span>
<span id="cb5-3"><a href="#cb5-3"></a></span>
<span id="cb5-4"><a href="#cb5-4"></a></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="co">#cargamos paquetes</span></span>
<span id="cb5-6"><a href="#cb5-6"></a></span>
<span id="cb5-7"><a href="#cb5-7"></a></span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="fu">library</span>(rio)</span>
<span id="cb5-9"><a href="#cb5-9"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb5-10"><a href="#cb5-10"></a><span class="fu">library</span>(forcats)</span>
<span id="cb5-11"><a href="#cb5-11"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb5-12"><a href="#cb5-12"></a><span class="fu">library</span>(ggThemeAssist)</span>
<span id="cb5-13"><a href="#cb5-13"></a><span class="fu">library</span>(janitor)</span>
<span id="cb5-14"><a href="#cb5-14"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb5-15"><a href="#cb5-15"></a><span class="fu">library</span>(plotly)</span>
<span id="cb5-16"><a href="#cb5-16"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb5-17"><a href="#cb5-17"></a><span class="fu">library</span>(ggThemeAssist)</span>
<span id="cb5-18"><a href="#cb5-18"></a><span class="fu">library</span>(rnaturalearth)</span>
<span id="cb5-19"><a href="#cb5-19"></a><span class="fu">library</span>(rnaturalearthdata)</span>
<span id="cb5-20"><a href="#cb5-20"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb5-21"><a href="#cb5-21"></a><span class="fu">library</span>(viridis)</span>
<span id="cb5-22"><a href="#cb5-22"></a><span class="fu">library</span>(highcharter)</span>
<span id="cb5-23"><a href="#cb5-23"></a><span class="fu">library</span>(treemapify)</span>
<span id="cb5-24"><a href="#cb5-24"></a><span class="fu">library</span>(treemap)</span>
<span id="cb5-25"><a href="#cb5-25"></a></span>
<span id="cb5-26"><a href="#cb5-26"></a><span class="co">#importamos los datos</span></span>
<span id="cb5-27"><a href="#cb5-27"></a></span>
<span id="cb5-28"><a href="#cb5-28"></a><span class="co">#fs::dir_create("datos")</span></span>
<span id="cb5-29"><a href="#cb5-29"></a></span>
<span id="cb5-30"><a href="#cb5-30"></a><span class="co">#importamos los datos de la carpeta datos</span></span>
<span id="cb5-31"><a href="#cb5-31"></a></span>
<span id="cb5-32"><a href="#cb5-32"></a>happy <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(<span class="st">"./datos/happyscore_income.csv"</span>)</span>
<span id="cb5-33"><a href="#cb5-33"></a></span>
<span id="cb5-34"><a href="#cb5-34"></a><span class="co">#limpiar nombres</span></span>
<span id="cb5-35"><a href="#cb5-35"></a></span>
<span id="cb5-36"><a href="#cb5-36"></a>feliz <span class="ot">&lt;-</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>(happy)</span>
<span id="cb5-37"><a href="#cb5-37"></a></span>
<span id="cb5-38"><a href="#cb5-38"></a><span class="co">#Segundo gráfico (facet por region)</span></span>
<span id="cb5-39"><a href="#cb5-39"></a></span>
<span id="cb5-40"><a href="#cb5-40"></a><span class="co">#Hacer tabla</span></span>
<span id="cb5-41"><a href="#cb5-41"></a></span>
<span id="cb5-42"><a href="#cb5-42"></a></span>
<span id="cb5-43"><a href="#cb5-43"></a>tabla_2 <span class="ot">&lt;-</span> feliz <span class="sc">%&gt;%</span></span>
<span id="cb5-44"><a href="#cb5-44"></a>  <span class="fu">select</span> (region, happy_score, gdp, country)</span>
<span id="cb5-45"><a href="#cb5-45"></a></span>
<span id="cb5-46"><a href="#cb5-46"></a><span class="co">#hacer gráfico</span></span>
<span id="cb5-47"><a href="#cb5-47"></a></span>
<span id="cb5-48"><a href="#cb5-48"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(tabla_2) <span class="sc">+</span></span>
<span id="cb5-49"><a href="#cb5-49"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> gdp, <span class="at">y =</span> happy_score, <span class="at">colour =</span> region)) <span class="sc">+</span></span>
<span id="cb5-50"><a href="#cb5-50"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(region))</span>
<span id="cb5-51"><a href="#cb5-51"></a></span>
<span id="cb5-52"><a href="#cb5-52"></a></span>
<span id="cb5-53"><a href="#cb5-53"></a>p2 <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"AvantGarde"</span>),</span>
<span id="cb5-54"><a href="#cb5-54"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"AvantGarde"</span>,</span>
<span id="cb5-55"><a href="#cb5-55"></a>        <span class="at">face =</span> <span class="st">"bold"</span>), <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"whitesmoke"</span>,</span>
<span id="cb5-56"><a href="#cb5-56"></a>        <span class="at">linetype =</span> <span class="st">"dotted"</span>)) <span class="sc">+</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"ÍNDICE FELICIDAD EN RELACIÓN AL PIB"</span>,</span>
<span id="cb5-57"><a href="#cb5-57"></a>    <span class="at">x =</span> <span class="st">"PIB (0 - 1.6)"</span>, <span class="at">y =</span> <span class="st">"Índice felicidad (2.5 - 8)"</span>,</span>
<span id="cb5-58"><a href="#cb5-58"></a>    <span class="at">colour =</span> <span class="st">"Regiones"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="my_trabajo_BigData_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" style="width:95.0%"></p>
</figure>
</div>
</div>
</div>
</section></section><section id="desigualdad-y-felicidad-por-países" class="level2"><h2 class="anchored" data-anchor-id="desigualdad-y-felicidad-por-países">Desigualdad y felicidad por países</h2>
<p>Como veníamos diciendo el PIB no puede determinar de forma aislada el índice de felicidad, puesto que hay otros causantes, como la desigualdad, que también pueden explicar los distintos niveles de felicidad. En el siguiente mapa se pueden ver los índices de desigualdad por países agrupados en cuatro niveles según el grado de desigualdad en una escala de 1 a 4, donde los países pertenecientes al primer grupo son los países con menor desigualdad de ingresos, siendo el cuarto grupo el que nos indica los países con mayores desigualdades. Si comparamos con el mapa de la felicidad, el cual también está agrupado por niveles de felicidad en una escala del 1 al 4, donde los países del nivel uno tienen los índices de felicidad más bajos y los países de nivel cuatro los que mayor índice tienen, podemos observar, por ejemplo, correlaciones positivas entre los países nórdicos donde índices muy bajos de desigualdad implican niveles muy altos de felicidad. En cambio toda la región de América tiene unos índices elevados de forma generalizada y en cambio también tiene unos índices altos de desigualdad, por lo que deja de haber una correlación positiva.</p>
<div class="cell" data-layout-align="center">
<details open=""><summary>Código</summary><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a></span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="co">#| echo:false</span></span>
<span id="cb6-3"><a href="#cb6-3"></a></span>
<span id="cb6-4"><a href="#cb6-4"></a></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="fu">library</span>(rio)</span>
<span id="cb6-6"><a href="#cb6-6"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb6-7"><a href="#cb6-7"></a><span class="fu">library</span>(forcats)</span>
<span id="cb6-8"><a href="#cb6-8"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb6-9"><a href="#cb6-9"></a><span class="fu">library</span>(ggThemeAssist)</span>
<span id="cb6-10"><a href="#cb6-10"></a><span class="fu">library</span>(janitor)</span>
<span id="cb6-11"><a href="#cb6-11"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb6-12"><a href="#cb6-12"></a><span class="fu">library</span>(plotly)</span>
<span id="cb6-13"><a href="#cb6-13"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb6-14"><a href="#cb6-14"></a><span class="fu">library</span>(ggThemeAssist)</span>
<span id="cb6-15"><a href="#cb6-15"></a><span class="fu">library</span>(rnaturalearth)</span>
<span id="cb6-16"><a href="#cb6-16"></a><span class="fu">library</span>(rnaturalearthdata)</span>
<span id="cb6-17"><a href="#cb6-17"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb6-18"><a href="#cb6-18"></a><span class="fu">library</span>(viridis)</span>
<span id="cb6-19"><a href="#cb6-19"></a><span class="fu">library</span>(highcharter)</span>
<span id="cb6-20"><a href="#cb6-20"></a><span class="fu">library</span>(treemapify)</span>
<span id="cb6-21"><a href="#cb6-21"></a><span class="fu">library</span>(treemap)</span>
<span id="cb6-22"><a href="#cb6-22"></a></span>
<span id="cb6-23"><a href="#cb6-23"></a></span>
<span id="cb6-24"><a href="#cb6-24"></a><span class="co">#fs::dir_create("datos")</span></span>
<span id="cb6-25"><a href="#cb6-25"></a></span>
<span id="cb6-26"><a href="#cb6-26"></a><span class="co">#importamos los datos de la carpeta datos</span></span>
<span id="cb6-27"><a href="#cb6-27"></a></span>
<span id="cb6-28"><a href="#cb6-28"></a>happy <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(<span class="st">"./datos/happyscore_income.csv"</span>)</span>
<span id="cb6-29"><a href="#cb6-29"></a></span>
<span id="cb6-30"><a href="#cb6-30"></a><span class="co">#limpiar nombres</span></span>
<span id="cb6-31"><a href="#cb6-31"></a></span>
<span id="cb6-32"><a href="#cb6-32"></a>feliz <span class="ot">&lt;-</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>(happy)</span>
<span id="cb6-33"><a href="#cb6-33"></a></span>
<span id="cb6-34"><a href="#cb6-34"></a></span>
<span id="cb6-35"><a href="#cb6-35"></a><span class="co">#MAPA 2</span></span>
<span id="cb6-36"><a href="#cb6-36"></a></span>
<span id="cb6-37"><a href="#cb6-37"></a><span class="co">#Hacer tabla</span></span>
<span id="cb6-38"><a href="#cb6-38"></a></span>
<span id="cb6-39"><a href="#cb6-39"></a>tabla_m <span class="ot">&lt;-</span> feliz <span class="sc">%&gt;%</span></span>
<span id="cb6-40"><a href="#cb6-40"></a>  <span class="fu">select</span>(country,income_inequality)</span>
<span id="cb6-41"><a href="#cb6-41"></a></span>
<span id="cb6-42"><a href="#cb6-42"></a><span class="co">#mapa</span></span>
<span id="cb6-43"><a href="#cb6-43"></a></span>
<span id="cb6-44"><a href="#cb6-44"></a>world <span class="ot">&lt;-</span> rnaturalearth<span class="sc">::</span><span class="fu">ne_countries</span>(<span class="at">scale =</span> <span class="st">"medium"</span>, <span class="at">returnclass =</span> <span class="st">"sf"</span>)</span>
<span id="cb6-45"><a href="#cb6-45"></a></span>
<span id="cb6-46"><a href="#cb6-46"></a>world <span class="ot">&lt;-</span> world <span class="sc">%&gt;%</span> <span class="fu">filter</span>(subregion <span class="sc">!=</span> <span class="st">"Antarctica"</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(admin <span class="sc">!=</span> <span class="st">"Greenland"</span>)</span>
<span id="cb6-47"><a href="#cb6-47"></a></span>
<span id="cb6-48"><a href="#cb6-48"></a>world <span class="ot">&lt;-</span> world <span class="sc">%&gt;%</span> <span class="fu">select</span>(name, iso_a3, geometry)</span>
<span id="cb6-49"><a href="#cb6-49"></a></span>
<span id="cb6-50"><a href="#cb6-50"></a>df_world <span class="ot">&lt;-</span> <span class="fu">left_join</span>(world, tabla_m, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"name"</span> <span class="ot">=</span> <span class="st">"country"</span>) ) <span class="sc">%&gt;%</span></span>
<span id="cb6-51"><a href="#cb6-51"></a>  <span class="co">#filter(!is.na(iso_a3)) %&gt;%</span></span>
<span id="cb6-52"><a href="#cb6-52"></a>  <span class="fu">mutate</span>(<span class="at">income_inequality_4 =</span> <span class="fu">as_factor</span>(<span class="fu">ntile</span>(income_inequality, <span class="dv">4</span>)))</span>
<span id="cb6-53"><a href="#cb6-53"></a></span>
<span id="cb6-54"><a href="#cb6-54"></a>p3 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_world) <span class="sc">+</span> <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">geometry =</span> geometry, <span class="at">fill =</span> income_inequality_4)) </span>
<span id="cb6-55"><a href="#cb6-55"></a></span>
<span id="cb6-56"><a href="#cb6-56"></a></span>
<span id="cb6-57"><a href="#cb6-57"></a>p3 <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"mono"</span>,</span>
<span id="cb6-58"><a href="#cb6-58"></a>                                     <span class="at">hjust =</span> <span class="fl">0.5</span>), <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NA</span>)) <span class="sc">+</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"ÍNDICE DE DESIGUALDAD POR PAÍSES"</span>, <span class="at">fill =</span> <span class="st">"Desigualdad "</span>) </span>
<span id="cb6-59"><a href="#cb6-59"></a></span>
<span id="cb6-60"><a href="#cb6-60"></a><span class="co">#mapa felicidad</span></span>
<span id="cb6-61"><a href="#cb6-61"></a></span>
<span id="cb6-62"><a href="#cb6-62"></a>tabla_3 <span class="ot">&lt;-</span> feliz <span class="sc">%&gt;%</span></span>
<span id="cb6-63"><a href="#cb6-63"></a>           <span class="fu">select</span>(country,happy_score)</span>
<span id="cb6-64"><a href="#cb6-64"></a></span>
<span id="cb6-65"><a href="#cb6-65"></a><span class="co">#mapa</span></span>
<span id="cb6-66"><a href="#cb6-66"></a></span>
<span id="cb6-67"><a href="#cb6-67"></a>world <span class="ot">&lt;-</span> rnaturalearth<span class="sc">::</span><span class="fu">ne_countries</span>(<span class="at">scale =</span> <span class="st">"medium"</span>, <span class="at">returnclass =</span> <span class="st">"sf"</span>)</span>
<span id="cb6-68"><a href="#cb6-68"></a></span>
<span id="cb6-69"><a href="#cb6-69"></a>world <span class="ot">&lt;-</span> world <span class="sc">%&gt;%</span> <span class="fu">filter</span>(subregion <span class="sc">!=</span> <span class="st">"Antarctica"</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(admin <span class="sc">!=</span> <span class="st">"Greenland"</span>)</span>
<span id="cb6-70"><a href="#cb6-70"></a></span>
<span id="cb6-71"><a href="#cb6-71"></a>world <span class="ot">&lt;-</span> world <span class="sc">%&gt;%</span> <span class="fu">select</span>(name, iso_a3, geometry)</span>
<span id="cb6-72"><a href="#cb6-72"></a></span>
<span id="cb6-73"><a href="#cb6-73"></a>df_world <span class="ot">&lt;-</span> <span class="fu">left_join</span>(world, tabla_3, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"name"</span> <span class="ot">=</span> <span class="st">"country"</span>) ) <span class="sc">%&gt;%</span></span>
<span id="cb6-74"><a href="#cb6-74"></a>            <span class="co">#filter(!is.na(iso_a3)) %&gt;%</span></span>
<span id="cb6-75"><a href="#cb6-75"></a>            <span class="fu">mutate</span>(<span class="at">happy_score_4 =</span> <span class="fu">as_factor</span>(<span class="fu">ntile</span>(happy_score, <span class="dv">4</span>)))</span>
<span id="cb6-76"><a href="#cb6-76"></a></span>
<span id="cb6-77"><a href="#cb6-77"></a>p3 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_world) <span class="sc">+</span> <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">geometry =</span> geometry, <span class="at">fill =</span> happy_score_4)) </span>
<span id="cb6-78"><a href="#cb6-78"></a></span>
<span id="cb6-79"><a href="#cb6-79"></a></span>
<span id="cb6-80"><a href="#cb6-80"></a>p3 <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"mono"</span>,</span>
<span id="cb6-81"><a href="#cb6-81"></a>    <span class="at">hjust =</span> <span class="fl">0.5</span>), <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NA</span>)) <span class="sc">+</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">" ÍNDICE DE FELICIDAD POR PAÍSES"</span>,</span>
<span id="cb6-82"><a href="#cb6-82"></a>    <span class="at">fill =</span> <span class="st">"Felicidad "</span>) <span class="sc">+</span> <span class="fu">scale_fill_viridis_d</span>() </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="my_trabajo_BigData_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" style="width:95.0%"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="my_trabajo_BigData_files/figure-html/unnamed-chunk-6-2.png" class="img-fluid figure-img" style="width:95.0%"></p>
</figure>
</div>
</div>
</div>
</section></section><section id="conclusiones" class="level1"><h1>Conclusiones</h1>
<p>Después de haber visto las relaciones que tienen el PIB y la desigualdad con la felicidad, y dejar claro que las correlaciones no implican causalidad y haberlo ejemplificdo con los distintos casos, solo cabe decir que la felicidad como variable dependiente es diferente en cada país, y estará constituida a su vez por diferentes variables explicativas con parámetros disintos, por lo que dependiendo de cada país, el PIB; la desigualdad; las costumbres o incluso el clima; entre otros, afectarán y explicarán de manera distinta los índices de felicidad. Y aunque las correlaciones nos puedan mostrar que pueden haber modelos parecidos entre países, las tendencias no serán nunca decisivas en la explicación de los disferentes modelos.</p>
<hr>
<p>Para felicidad la de este niño, peace and love!!</p>
<center>
<img src="imagenes/niño.png" width="500px">
</center>
<p><br></p>
<hr>
<p><br></p>
<section id="información-sobre-la-sesión" class="level3"><h3 class="anchored" data-anchor-id="información-sobre-la-sesión">Información sobre la sesión</h3>
<p>Abajo muestro mi entorno de trabajo y paquetes utilizados</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<details closed=""><summary><span title="Click to Expand"> current session info </span>
</summary><div class="sourceCode" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a></span>
<span id="cb7-2"><a href="#cb7-2"></a>─ Session info ───────────────────────────────────────────────────────────────</span>
<span id="cb7-3"><a href="#cb7-3"></a> setting  value</span>
<span id="cb7-4"><a href="#cb7-4"></a> version  R version <span class="dv">4</span>.<span class="fl">2.1</span> (<span class="dv">2022-06-23</span> ucrt)</span>
<span id="cb7-5"><a href="#cb7-5"></a> os       Windows <span class="dv">10</span> <span class="fu">x64</span> (build <span class="dv">19045</span>)</span>
<span id="cb7-6"><a href="#cb7-6"></a> system   x86_64, mingw32</span>
<span id="cb7-7"><a href="#cb7-7"></a> ui       RTerm</span>
<span id="cb7-8"><a href="#cb7-8"></a> <span class="fu">language</span> (EN)</span>
<span id="cb7-9"><a href="#cb7-9"></a> collate  Spanish_Spain.utf8</span>
<span id="cb7-10"><a href="#cb7-10"></a> ctype    Spanish_Spain.utf8</span>
<span id="cb7-11"><a href="#cb7-11"></a> tz       Europe<span class="sc">/</span>Paris</span>
<span id="cb7-12"><a href="#cb7-12"></a> date     <span class="dv">2023-01-12</span></span>
<span id="cb7-13"><a href="#cb7-13"></a> pandoc   <span class="fl">2.18</span> <span class="sc">@</span> C<span class="sc">:</span><span class="er">/</span>Program Files<span class="sc">/</span>RStudio<span class="sc">/</span>bin<span class="sc">/</span>quarto<span class="sc">/</span>bin<span class="sc">/</span>tools<span class="sc">/</span> (via rmarkdown)</span>
<span id="cb7-14"><a href="#cb7-14"></a></span>
<span id="cb7-15"><a href="#cb7-15"></a>─ Packages ───────────────────────────────────────────────────────────────────</span>
<span id="cb7-16"><a href="#cb7-16"></a> package           <span class="sc">*</span> version <span class="fu">date</span> (UTC) lib source</span>
<span id="cb7-17"><a href="#cb7-17"></a> assertthat          <span class="dv">0</span>.<span class="fl">2.1</span>   <span class="dv">2019-03-21</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-18"><a href="#cb7-18"></a> backports           <span class="dv">1</span>.<span class="fl">4.1</span>   <span class="dv">2021-12-13</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.0</span>)</span>
<span id="cb7-19"><a href="#cb7-19"></a> broom               <span class="dv">1</span>.<span class="fl">0.1</span>   <span class="dv">2022-08-29</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-20"><a href="#cb7-20"></a> bslib               <span class="dv">0</span>.<span class="fl">4.0</span>   <span class="dv">2022-07-16</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-21"><a href="#cb7-21"></a> cachem              <span class="dv">1</span>.<span class="fl">0.6</span>   <span class="dv">2021-08-19</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-22"><a href="#cb7-22"></a> cellranger          <span class="dv">1</span>.<span class="fl">1.0</span>   <span class="dv">2016-07-27</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-23"><a href="#cb7-23"></a> class               <span class="fl">7.3</span><span class="dv">-20</span>  <span class="dv">2022-01-16</span> [<span class="dv">2</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-24"><a href="#cb7-24"></a> classInt            <span class="fl">0.4</span><span class="dv">-7</span>   <span class="dv">2022-06-10</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-25"><a href="#cb7-25"></a> cli                 <span class="dv">3</span>.<span class="fl">4.0</span>   <span class="dv">2022-09-08</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-26"><a href="#cb7-26"></a> clipr               <span class="dv">0</span>.<span class="fl">8.0</span>   <span class="dv">2022-02-22</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-27"><a href="#cb7-27"></a> colorspace          <span class="fl">2.0</span><span class="dv">-3</span>   <span class="dv">2022-02-21</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-28"><a href="#cb7-28"></a> crayon              <span class="dv">1</span>.<span class="fl">5.1</span>   <span class="dv">2022-03-26</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-29"><a href="#cb7-29"></a> crosstalk           <span class="dv">1</span>.<span class="fl">2.0</span>   <span class="dv">2021-11-04</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-30"><a href="#cb7-30"></a> curl                <span class="dv">4</span>.<span class="fl">3.2</span>   <span class="dv">2021-06-23</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-31"><a href="#cb7-31"></a> data.table          <span class="dv">1</span>.<span class="fl">14.2</span>  <span class="dv">2021-09-27</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-32"><a href="#cb7-32"></a> DBI                 <span class="dv">1</span>.<span class="fl">1.3</span>   <span class="dv">2022-06-18</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-33"><a href="#cb7-33"></a> dbplyr              <span class="dv">2</span>.<span class="fl">2.1</span>   <span class="dv">2022-06-27</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-34"><a href="#cb7-34"></a> desc                <span class="dv">1</span>.<span class="fl">4.2</span>   <span class="dv">2022-09-08</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-35"><a href="#cb7-35"></a> details             <span class="dv">0</span>.<span class="fl">3.0</span>   <span class="dv">2022-03-27</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.2</span>)</span>
<span id="cb7-36"><a href="#cb7-36"></a> digest              <span class="dv">0</span>.<span class="fl">6.29</span>  <span class="dv">2021-12-01</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-37"><a href="#cb7-37"></a> dplyr             <span class="sc">*</span> <span class="dv">1</span>.<span class="fl">0.10</span>  <span class="dv">2022-09-01</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-38"><a href="#cb7-38"></a> DT                  <span class="fl">0.25</span>    <span class="dv">2022-09-12</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-39"><a href="#cb7-39"></a> e1071               <span class="fl">1.7</span><span class="dv">-11</span>  <span class="dv">2022-06-07</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-40"><a href="#cb7-40"></a> ellipsis            <span class="dv">0</span>.<span class="fl">3.2</span>   <span class="dv">2021-04-29</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-41"><a href="#cb7-41"></a> evaluate            <span class="fl">0.16</span>    <span class="dv">2022-08-09</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-42"><a href="#cb7-42"></a> fansi               <span class="dv">1</span>.<span class="fl">0.3</span>   <span class="dv">2022-03-24</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-43"><a href="#cb7-43"></a> farver              <span class="dv">2</span>.<span class="fl">1.1</span>   <span class="dv">2022-07-06</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-44"><a href="#cb7-44"></a> fastmap             <span class="dv">1</span>.<span class="fl">1.0</span>   <span class="dv">2021-01-25</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-45"><a href="#cb7-45"></a> forcats           <span class="sc">*</span> <span class="dv">0</span>.<span class="fl">5.2</span>   <span class="dv">2022-08-19</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-46"><a href="#cb7-46"></a> foreign             <span class="fl">0.8</span><span class="dv">-82</span>  <span class="dv">2022-01-16</span> [<span class="dv">2</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-47"><a href="#cb7-47"></a> formatR             <span class="fl">1.12</span>    <span class="dv">2022-03-31</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-48"><a href="#cb7-48"></a> fs                  <span class="dv">1</span>.<span class="fl">5.2</span>   <span class="dv">2021-12-08</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-49"><a href="#cb7-49"></a> gapminder         <span class="sc">*</span> <span class="dv">0</span>.<span class="fl">3.0</span>   <span class="dv">2017-10-31</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-50"><a href="#cb7-50"></a> gargle              <span class="dv">1</span>.<span class="fl">2.1</span>   <span class="dv">2022-09-08</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-51"><a href="#cb7-51"></a> generics            <span class="dv">0</span>.<span class="fl">1.3</span>   <span class="dv">2022-07-05</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-52"><a href="#cb7-52"></a> gganimate         <span class="sc">*</span> <span class="dv">1</span>.<span class="fl">0.8</span>   <span class="dv">2022-09-08</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.2</span>)</span>
<span id="cb7-53"><a href="#cb7-53"></a> ggfittext           <span class="dv">0</span>.<span class="fl">9.1</span>   <span class="dv">2021-01-30</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.2</span>)</span>
<span id="cb7-54"><a href="#cb7-54"></a> ggplot2           <span class="sc">*</span> <span class="dv">3</span>.<span class="fl">4.0</span>   <span class="dv">2022-11-04</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.2</span>)</span>
<span id="cb7-55"><a href="#cb7-55"></a> ggThemeAssist     <span class="sc">*</span> <span class="dv">0</span>.<span class="fl">1.5</span>   <span class="dv">2016-08-13</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-56"><a href="#cb7-56"></a> ggthemes          <span class="sc">*</span> <span class="dv">4</span>.<span class="fl">2.4</span>   <span class="dv">2021-01-20</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-57"><a href="#cb7-57"></a> gifski              <span class="dv">1</span>.<span class="fl">6.6</span><span class="dv">-1</span> <span class="dv">2022-04-05</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-58"><a href="#cb7-58"></a> glue                <span class="dv">1</span>.<span class="fl">6.2</span>   <span class="dv">2022-02-24</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-59"><a href="#cb7-59"></a> googledrive         <span class="dv">2</span>.<span class="fl">0.0</span>   <span class="dv">2021-07-08</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-60"><a href="#cb7-60"></a> googlesheets4       <span class="dv">1</span>.<span class="fl">0.1</span>   <span class="dv">2022-08-13</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-61"><a href="#cb7-61"></a> gridBase            <span class="fl">0.4</span><span class="dv">-7</span>   <span class="dv">2014-02-24</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.2</span>)</span>
<span id="cb7-62"><a href="#cb7-62"></a> gridExtra           <span class="fl">2.3</span>     <span class="dv">2017-09-09</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-63"><a href="#cb7-63"></a> gtable              <span class="dv">0</span>.<span class="fl">3.1</span>   <span class="dv">2022-09-01</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-64"><a href="#cb7-64"></a> haven               <span class="dv">2</span>.<span class="fl">5.1</span>   <span class="dv">2022-08-22</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-65"><a href="#cb7-65"></a> highcharter       <span class="sc">*</span> <span class="dv">0</span>.<span class="fl">9.4</span>   <span class="dv">2022-01-03</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.2</span>)</span>
<span id="cb7-66"><a href="#cb7-66"></a> hms                 <span class="dv">1</span>.<span class="fl">1.2</span>   <span class="dv">2022-08-19</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-67"><a href="#cb7-67"></a> htmltools           <span class="dv">0</span>.<span class="fl">5.3</span>   <span class="dv">2022-07-18</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-68"><a href="#cb7-68"></a> htmlwidgets         <span class="dv">1</span>.<span class="fl">5.4</span>   <span class="dv">2021-09-08</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-69"><a href="#cb7-69"></a> httpuv              <span class="dv">1</span>.<span class="fl">6.6</span>   <span class="dv">2022-09-08</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-70"><a href="#cb7-70"></a> httr                <span class="dv">1</span>.<span class="fl">4.4</span>   <span class="dv">2022-08-17</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-71"><a href="#cb7-71"></a> igraph              <span class="dv">1</span>.<span class="fl">3.5</span>   <span class="dv">2022-09-22</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.2</span>)</span>
<span id="cb7-72"><a href="#cb7-72"></a> janitor           <span class="sc">*</span> <span class="dv">2</span>.<span class="fl">1.0</span>   <span class="dv">2021-01-05</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-73"><a href="#cb7-73"></a> jquerylib           <span class="dv">0</span>.<span class="fl">1.4</span>   <span class="dv">2021-04-26</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-74"><a href="#cb7-74"></a> jsonlite            <span class="dv">1</span>.<span class="fl">8.0</span>   <span class="dv">2022-02-22</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-75"><a href="#cb7-75"></a> KernSmooth          <span class="fl">2.23</span><span class="dv">-20</span> <span class="dv">2021-05-03</span> [<span class="dv">2</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-76"><a href="#cb7-76"></a> knitr               <span class="fl">1.40</span>    <span class="dv">2022-08-24</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-77"><a href="#cb7-77"></a> labeling            <span class="dv">0</span>.<span class="fl">4.2</span>   <span class="dv">2020-10-20</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.0</span>)</span>
<span id="cb7-78"><a href="#cb7-78"></a> later               <span class="dv">1</span>.<span class="fl">3.0</span>   <span class="dv">2021-08-18</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-79"><a href="#cb7-79"></a> lattice             <span class="fl">0.20</span><span class="dv">-45</span> <span class="dv">2021-09-22</span> [<span class="dv">2</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-80"><a href="#cb7-80"></a> lazyeval            <span class="dv">0</span>.<span class="fl">2.2</span>   <span class="dv">2019-03-15</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-81"><a href="#cb7-81"></a> lifecycle           <span class="dv">1</span>.<span class="fl">0.3</span>   <span class="dv">2022-10-07</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.2</span>)</span>
<span id="cb7-82"><a href="#cb7-82"></a> lubridate           <span class="dv">1</span>.<span class="fl">8.0</span>   <span class="dv">2021-10-07</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-83"><a href="#cb7-83"></a> magrittr            <span class="dv">2</span>.<span class="fl">0.3</span>   <span class="dv">2022-03-30</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-84"><a href="#cb7-84"></a> Matrix              <span class="fl">1.5</span><span class="dv">-0</span>   <span class="dv">2022-09-10</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-85"><a href="#cb7-85"></a> mgcv                <span class="fl">1.8</span><span class="dv">-40</span>  <span class="dv">2022-03-29</span> [<span class="dv">2</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-86"><a href="#cb7-86"></a> mime                <span class="fl">0.12</span>    <span class="dv">2021-09-28</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.0</span>)</span>
<span id="cb7-87"><a href="#cb7-87"></a> miniUI              <span class="dv">0</span>.<span class="dv">1</span>.<span class="fl">1.1</span> <span class="dv">2018-05-18</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-88"><a href="#cb7-88"></a> modelr              <span class="dv">0</span>.<span class="fl">1.9</span>   <span class="dv">2022-08-19</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-89"><a href="#cb7-89"></a> munsell             <span class="dv">0</span>.<span class="fl">5.0</span>   <span class="dv">2018-06-12</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-90"><a href="#cb7-90"></a> nlme                <span class="fl">3.1</span><span class="dv">-157</span> <span class="dv">2022-03-25</span> [<span class="dv">2</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-91"><a href="#cb7-91"></a> openxlsx            <span class="dv">4</span>.<span class="fl">2.5</span>   <span class="dv">2021-12-14</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-92"><a href="#cb7-92"></a> pillar              <span class="dv">1</span>.<span class="fl">8.1</span>   <span class="dv">2022-08-19</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-93"><a href="#cb7-93"></a> pkgconfig           <span class="dv">2</span>.<span class="fl">0.3</span>   <span class="dv">2019-09-22</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-94"><a href="#cb7-94"></a> plotly            <span class="sc">*</span> <span class="dv">4</span>.<span class="fl">10.0</span>  <span class="dv">2021-10-09</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-95"><a href="#cb7-95"></a> png                 <span class="fl">0.1</span><span class="dv">-7</span>   <span class="dv">2013-12-03</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.0</span>)</span>
<span id="cb7-96"><a href="#cb7-96"></a> prettyunits         <span class="dv">1</span>.<span class="fl">1.1</span>   <span class="dv">2020-01-24</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-97"><a href="#cb7-97"></a> progress            <span class="dv">1</span>.<span class="fl">2.2</span>   <span class="dv">2019-05-16</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-98"><a href="#cb7-98"></a> promises            <span class="dv">1</span>.<span class="dv">2</span>.<span class="fl">0.1</span> <span class="dv">2021-02-11</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-99"><a href="#cb7-99"></a> proxy               <span class="fl">0.4</span><span class="dv">-27</span>  <span class="dv">2022-06-09</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-100"><a href="#cb7-100"></a> purrr             <span class="sc">*</span> <span class="dv">0</span>.<span class="fl">3.4</span>   <span class="dv">2020-04-17</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-101"><a href="#cb7-101"></a> quantmod            <span class="dv">0</span>.<span class="fl">4.20</span>  <span class="dv">2022-04-29</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.2</span>)</span>
<span id="cb7-102"><a href="#cb7-102"></a> R6                  <span class="dv">2</span>.<span class="fl">5.1</span>   <span class="dv">2021-08-19</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-103"><a href="#cb7-103"></a> RColorBrewer        <span class="fl">1.1</span><span class="dv">-3</span>   <span class="dv">2022-04-03</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.0</span>)</span>
<span id="cb7-104"><a href="#cb7-104"></a> Rcpp                <span class="dv">1</span>.<span class="fl">0.9</span>   <span class="dv">2022-07-08</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-105"><a href="#cb7-105"></a> readr             <span class="sc">*</span> <span class="dv">2</span>.<span class="fl">1.2</span>   <span class="dv">2022-01-30</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-106"><a href="#cb7-106"></a> readxl              <span class="dv">1</span>.<span class="fl">4.1</span>   <span class="dv">2022-08-17</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-107"><a href="#cb7-107"></a> reprex              <span class="dv">2</span>.<span class="fl">0.2</span>   <span class="dv">2022-08-17</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-108"><a href="#cb7-108"></a> rio               <span class="sc">*</span> <span class="dv">0</span>.<span class="fl">5.29</span>  <span class="dv">2021-11-22</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-109"><a href="#cb7-109"></a> rlang               <span class="dv">1</span>.<span class="fl">0.6</span>   <span class="dv">2022-09-24</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.2</span>)</span>
<span id="cb7-110"><a href="#cb7-110"></a> rlist               <span class="dv">0</span>.<span class="dv">4</span>.<span class="fl">6.2</span> <span class="dv">2021-09-03</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.2</span>)</span>
<span id="cb7-111"><a href="#cb7-111"></a> rmarkdown           <span class="fl">2.16</span>    <span class="dv">2022-08-24</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-112"><a href="#cb7-112"></a> rnaturalearth     <span class="sc">*</span> <span class="dv">0</span>.<span class="fl">1.0</span>   <span class="dv">2017-03-21</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.2</span>)</span>
<span id="cb7-113"><a href="#cb7-113"></a> rnaturalearthdata <span class="sc">*</span> <span class="dv">0</span>.<span class="fl">1.0</span>   <span class="dv">2017-02-21</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.2</span>)</span>
<span id="cb7-114"><a href="#cb7-114"></a> rprojroot           <span class="dv">2</span>.<span class="fl">0.3</span>   <span class="dv">2022-04-02</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-115"><a href="#cb7-115"></a> rstudioapi          <span class="fl">0.14</span>    <span class="dv">2022-08-22</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-116"><a href="#cb7-116"></a> rvest               <span class="dv">1</span>.<span class="fl">0.3</span>   <span class="dv">2022-08-19</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-117"><a href="#cb7-117"></a> s2                  <span class="dv">1</span>.<span class="fl">1.0</span>   <span class="dv">2022-07-18</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-118"><a href="#cb7-118"></a> sass                <span class="dv">0</span>.<span class="fl">4.2</span>   <span class="dv">2022-07-16</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-119"><a href="#cb7-119"></a> scales              <span class="dv">1</span>.<span class="fl">2.1</span>   <span class="dv">2022-08-20</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.2</span>)</span>
<span id="cb7-120"><a href="#cb7-120"></a> sessioninfo         <span class="dv">1</span>.<span class="fl">2.2</span>   <span class="dv">2021-12-06</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-121"><a href="#cb7-121"></a> sf                  <span class="fl">1.0</span><span class="dv">-8</span>   <span class="dv">2022-07-14</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-122"><a href="#cb7-122"></a> shiny               <span class="dv">1</span>.<span class="fl">7.2</span>   <span class="dv">2022-07-19</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-123"><a href="#cb7-123"></a> snakecase           <span class="dv">0</span>.<span class="fl">11.0</span>  <span class="dv">2019-05-25</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-124"><a href="#cb7-124"></a> sp                  <span class="fl">1.5</span><span class="dv">-0</span>   <span class="dv">2022-06-05</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-125"><a href="#cb7-125"></a> stringi             <span class="dv">1</span>.<span class="fl">7.8</span>   <span class="dv">2022-07-11</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-126"><a href="#cb7-126"></a> stringr           <span class="sc">*</span> <span class="dv">1</span>.<span class="fl">4.1</span>   <span class="dv">2022-08-20</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-127"><a href="#cb7-127"></a> tibble            <span class="sc">*</span> <span class="dv">3</span>.<span class="fl">1.8</span>   <span class="dv">2022-07-22</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-128"><a href="#cb7-128"></a> tidyr             <span class="sc">*</span> <span class="dv">1</span>.<span class="fl">2.1</span>   <span class="dv">2022-09-08</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-129"><a href="#cb7-129"></a> tidyselect          <span class="dv">1</span>.<span class="fl">2.0</span>   <span class="dv">2022-10-10</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.2</span>)</span>
<span id="cb7-130"><a href="#cb7-130"></a> tidyverse         <span class="sc">*</span> <span class="dv">1</span>.<span class="fl">3.2</span>   <span class="dv">2022-07-18</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.2</span>)</span>
<span id="cb7-131"><a href="#cb7-131"></a> treemap           <span class="sc">*</span> <span class="fl">2.4</span><span class="dv">-3</span>   <span class="dv">2021-08-22</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.2</span>)</span>
<span id="cb7-132"><a href="#cb7-132"></a> treemapify        <span class="sc">*</span> <span class="dv">2</span>.<span class="fl">5.5</span>   <span class="dv">2021-01-08</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.2</span>)</span>
<span id="cb7-133"><a href="#cb7-133"></a> TTR                 <span class="dv">0</span>.<span class="fl">24.3</span>  <span class="dv">2021-12-12</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.2</span>)</span>
<span id="cb7-134"><a href="#cb7-134"></a> tweenr              <span class="dv">2</span>.<span class="fl">0.2</span>   <span class="dv">2022-09-06</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.2</span>)</span>
<span id="cb7-135"><a href="#cb7-135"></a> tzdb                <span class="dv">0</span>.<span class="fl">3.0</span>   <span class="dv">2022-03-28</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-136"><a href="#cb7-136"></a> units               <span class="fl">0.8</span><span class="dv">-0</span>   <span class="dv">2022-02-05</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-137"><a href="#cb7-137"></a> utf8                <span class="dv">1</span>.<span class="fl">2.2</span>   <span class="dv">2021-07-24</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-138"><a href="#cb7-138"></a> vctrs               <span class="dv">0</span>.<span class="fl">5.0</span>   <span class="dv">2022-10-22</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.2</span>)</span>
<span id="cb7-139"><a href="#cb7-139"></a> viridis           <span class="sc">*</span> <span class="dv">0</span>.<span class="fl">6.2</span>   <span class="dv">2021-10-13</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.2</span>)</span>
<span id="cb7-140"><a href="#cb7-140"></a> viridisLite       <span class="sc">*</span> <span class="dv">0</span>.<span class="fl">4.1</span>   <span class="dv">2022-08-22</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-141"><a href="#cb7-141"></a> withr               <span class="dv">2</span>.<span class="fl">5.0</span>   <span class="dv">2022-03-03</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-142"><a href="#cb7-142"></a> wk                  <span class="dv">0</span>.<span class="fl">6.0</span>   <span class="dv">2022-01-03</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-143"><a href="#cb7-143"></a> xfun                <span class="fl">0.32</span>    <span class="dv">2022-08-10</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-144"><a href="#cb7-144"></a> xml2                <span class="dv">1</span>.<span class="fl">3.3</span>   <span class="dv">2021-11-30</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-145"><a href="#cb7-145"></a> xtable              <span class="fl">1.8</span><span class="dv">-4</span>   <span class="dv">2019-04-21</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-146"><a href="#cb7-146"></a> xts                 <span class="dv">0</span>.<span class="fl">12.2</span>  <span class="dv">2022-10-16</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.2</span>)</span>
<span id="cb7-147"><a href="#cb7-147"></a> yaml                <span class="dv">2</span>.<span class="fl">3.5</span>   <span class="dv">2022-02-21</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-148"><a href="#cb7-148"></a> zip                 <span class="dv">2</span>.<span class="fl">2.1</span>   <span class="dv">2022-09-08</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.1</span>)</span>
<span id="cb7-149"><a href="#cb7-149"></a> zoo                 <span class="fl">1.8</span><span class="dv">-11</span>  <span class="dv">2022-09-17</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">2.2</span>)</span>
<span id="cb7-150"><a href="#cb7-150"></a></span>
<span id="cb7-151"><a href="#cb7-151"></a> [<span class="dv">1</span>] C<span class="sc">:</span><span class="er">/</span>Users<span class="sc">/</span>Usuario<span class="sc">/</span>AppData<span class="sc">/</span>Local<span class="sc">/</span>R<span class="sc">/</span>win<span class="sc">-</span>library<span class="sc">/</span><span class="fl">4.2</span></span>
<span id="cb7-152"><a href="#cb7-152"></a> [<span class="dv">2</span>] C<span class="sc">:</span><span class="er">/</span>Program Files<span class="sc">/</span>R<span class="sc">/</span>R<span class="dv">-4</span>.<span class="fl">2.1</span><span class="sc">/</span>library</span>
<span id="cb7-153"><a href="#cb7-153"></a></span>
<span id="cb7-154"><a href="#cb7-154"></a>──────────────────────────────────────────────────────────────────────────────</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><p><br></p>
</div>
</div>


<!-- -->

</section></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiado");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiado");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
    var links = window.document.querySelectorAll('a:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
      }
    }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Ejecutar el código</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb8" data-shortcodes="false"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb8-1"><a href="#cb8-1"></a><span class="co">---</span></span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="an">title:</span><span class="co">  "La felicidad en relación a la renta"</span></span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="an">description:</span><span class="co"> |</span></span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="co">  Cómo el nivel de ingresos afectan a nuestra felicidad.</span></span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="an">author:</span><span class="co"> Vera Monteagudo         (vemonse@alumni.uv.es)  #--</span></span>
<span id="cb8-6"><a href="#cb8-6"></a><span class="an">date:</span><span class="co"> 2023-01-08                  </span></span>
<span id="cb8-7"><a href="#cb8-7"></a><span class="an">categories:</span><span class="co"> [Felicidad, PIB, Desigualdad]   #--</span></span>
<span id="cb8-8"><a href="#cb8-8"></a><span class="an">image:</span><span class="co"> "./imagenes/imagen_01.png"</span></span>
<span id="cb8-9"><a href="#cb8-9"></a><span class="an">title-block-banner:</span><span class="co"> true #- {true, false, "green","#AA0000"}</span></span>
<span id="cb8-10"><a href="#cb8-10"></a><span class="an">title-block-banner-color:</span><span class="co"> "white"    #-"#FFFFFF" </span></span>
<span id="cb8-11"><a href="#cb8-11"></a><span class="an">toc:</span><span class="co"> true</span></span>
<span id="cb8-12"><a href="#cb8-12"></a><span class="an">toc-location:</span><span class="co"> left</span></span>
<span id="cb8-13"><a href="#cb8-13"></a><span class="an">toc-depth:</span><span class="co"> 3</span></span>
<span id="cb8-14"><a href="#cb8-14"></a><span class="an">smooth-scroll:</span><span class="co"> true</span></span>
<span id="cb8-15"><a href="#cb8-15"></a><span class="an">format:</span><span class="co"> </span></span>
<span id="cb8-16"><a href="#cb8-16"></a><span class="co">  html:</span></span>
<span id="cb8-17"><a href="#cb8-17"></a><span class="co">    #backgroundcolor: "#F1F3F4"</span></span>
<span id="cb8-18"><a href="#cb8-18"></a><span class="co">    #standalone: true  </span></span>
<span id="cb8-19"><a href="#cb8-19"></a><span class="co">    link-external-newwindow: true</span></span>
<span id="cb8-20"><a href="#cb8-20"></a><span class="co">    #css: ./assets/my_css_file.css   #- CUIDADO!!!!</span></span>
<span id="cb8-21"><a href="#cb8-21"></a><span class="an">code-tools:</span><span class="co"> true</span></span>
<span id="cb8-22"><a href="#cb8-22"></a><span class="an">code-link:</span><span class="co"> true</span></span>
<span id="cb8-23"><a href="#cb8-23"></a><span class="co">---</span></span>
<span id="cb8-24"><a href="#cb8-24"></a></span>
<span id="cb8-25"><a href="#cb8-25"></a></span>
<span id="cb8-26"><a href="#cb8-26"></a><span class="fu"># Introducción</span></span>
<span id="cb8-27"><a href="#cb8-27"></a></span>
<span id="cb8-28"><a href="#cb8-28"></a>¿Cómo somos de felices?, ¿Cómo afectan los ingresos, el PIB o la desigualdad en la percepción que tenemos de felicidad?.</span>
<span id="cb8-29"><a href="#cb8-29"></a>Pues precisamente de esto es de lo que vamos a hablar aquí, veremos si exsiste una fórmula precisa de poder medir las causas de la felicidad de la gente... o no.</span>
<span id="cb8-30"><a href="#cb8-30"></a>Veremos también las correlaciones entre las felicidad y los ingresos, así como la correlación con la desigualdad, y si esto es determinante para poder sacar una conclusión sólida acerca de los niveles de felicidad.</span>
<span id="cb8-31"><a href="#cb8-31"></a></span>
<span id="cb8-32"><a href="#cb8-32"></a></span>
<span id="cb8-33"><a href="#cb8-33"></a></span>
<span id="cb8-34"><a href="#cb8-34"></a><span class="fu"># Datos del trabajo</span></span>
<span id="cb8-35"><a href="#cb8-35"></a></span>
<span id="cb8-36"><a href="#cb8-36"></a>::: {.panel-tabset}</span>
<span id="cb8-37"><a href="#cb8-37"></a></span>
<span id="cb8-38"><a href="#cb8-38"></a><span class="fu">## Datos usados</span></span>
<span id="cb8-39"><a href="#cb8-39"></a></span>
<span id="cb8-40"><a href="#cb8-40"></a>Los datos que hemos utilizado para este trabajo provienen de la página Kaggle. Esta pagina es</span>
<span id="cb8-41"><a href="#cb8-41"></a>una comunidad online de profesionales y científicos de datos. Página recomendable para</span>
<span id="cb8-42"><a href="#cb8-42"></a>buscar datos acerca de temas relacionados con R. Por si la queréis usar para hacer otros trabajos pincha <span class="co">[</span><span class="ot">aquí</span><span class="co">](https://www.kaggle.com/)</span>.</span>
<span id="cb8-43"><a href="#cb8-43"></a></span>
<span id="cb8-44"><a href="#cb8-44"></a>Vamos a utilizar datos de un paquete dentro de Kaggle .La página web del paquete está <span class="co">[</span><span class="ot">aquí</span><span class="co">](https://www.kaggle.com/datasets/levyedgar44/income-and-happiness-correction)</span>.</span>
<span id="cb8-45"><a href="#cb8-45"></a></span>
<span id="cb8-46"><a href="#cb8-46"></a>El dataset contiene observaciones sobre un conjunto de datos que reflejan la relación entre la renta y la felicidad de 111 países.</span>
<span id="cb8-47"><a href="#cb8-47"></a>Por tanto, vamos a analizar los datos y veremos las relaciones que guardan.</span>
<span id="cb8-48"><a href="#cb8-48"></a></span>
<span id="cb8-49"><a href="#cb8-49"></a>Bibliografía: Kaggle y web de la asignatura.</span>
<span id="cb8-50"><a href="#cb8-50"></a></span>
<span id="cb8-51"><a href="#cb8-51"></a><span class="fu">## Código</span></span>
<span id="cb8-52"><a href="#cb8-52"></a></span>
<span id="cb8-53"><a href="#cb8-53"></a></span>
<span id="cb8-56"><a href="#cb8-56"></a><span class="in">```{r}</span></span>
<span id="cb8-57"><a href="#cb8-57"></a><span class="co">#| echo:false</span></span>
<span id="cb8-58"><a href="#cb8-58"></a></span>
<span id="cb8-59"><a href="#cb8-59"></a><span class="fu">library</span>(rio)</span>
<span id="cb8-60"><a href="#cb8-60"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb8-61"><a href="#cb8-61"></a><span class="fu">library</span>(forcats)</span>
<span id="cb8-62"><a href="#cb8-62"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb8-63"><a href="#cb8-63"></a><span class="fu">library</span>(ggThemeAssist)</span>
<span id="cb8-64"><a href="#cb8-64"></a><span class="fu">library</span>(janitor)</span>
<span id="cb8-65"><a href="#cb8-65"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb8-66"><a href="#cb8-66"></a><span class="fu">library</span>(plotly)</span>
<span id="cb8-67"><a href="#cb8-67"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb8-68"><a href="#cb8-68"></a><span class="fu">library</span>(ggThemeAssist)</span>
<span id="cb8-69"><a href="#cb8-69"></a><span class="fu">library</span>(rnaturalearth)</span>
<span id="cb8-70"><a href="#cb8-70"></a><span class="fu">library</span>(rnaturalearthdata)</span>
<span id="cb8-71"><a href="#cb8-71"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb8-72"><a href="#cb8-72"></a><span class="fu">library</span>(viridis)</span>
<span id="cb8-73"><a href="#cb8-73"></a><span class="fu">library</span>(highcharter)</span>
<span id="cb8-74"><a href="#cb8-74"></a><span class="fu">library</span>(treemapify)</span>
<span id="cb8-75"><a href="#cb8-75"></a><span class="fu">library</span>(treemap)</span>
<span id="cb8-76"><a href="#cb8-76"></a></span>
<span id="cb8-77"><a href="#cb8-77"></a></span>
<span id="cb8-78"><a href="#cb8-78"></a><span class="co">#fs::dir_create("datos")</span></span>
<span id="cb8-79"><a href="#cb8-79"></a></span>
<span id="cb8-80"><a href="#cb8-80"></a><span class="co">#importamos los datos de la carpeta datos</span></span>
<span id="cb8-81"><a href="#cb8-81"></a></span>
<span id="cb8-82"><a href="#cb8-82"></a>happy <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(<span class="st">"./datos/happyscore_income.csv"</span>)</span>
<span id="cb8-83"><a href="#cb8-83"></a></span>
<span id="cb8-84"><a href="#cb8-84"></a><span class="co">#limpiar nombres</span></span>
<span id="cb8-85"><a href="#cb8-85"></a></span>
<span id="cb8-86"><a href="#cb8-86"></a>feliz <span class="ot">&lt;-</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>(happy)</span>
<span id="cb8-87"><a href="#cb8-87"></a></span>
<span id="cb8-88"><a href="#cb8-88"></a></span>
<span id="cb8-89"><a href="#cb8-89"></a><span class="in">```</span></span>
<span id="cb8-90"><a href="#cb8-90"></a></span>
<span id="cb8-91"><a href="#cb8-91"></a>:::</span>
<span id="cb8-92"><a href="#cb8-92"></a></span>
<span id="cb8-93"><a href="#cb8-93"></a>---</span>
<span id="cb8-94"><a href="#cb8-94"></a></span>
<span id="cb8-95"><a href="#cb8-95"></a><span class="fu"># Análisis de los datos</span></span>
<span id="cb8-96"><a href="#cb8-96"></a></span>
<span id="cb8-97"><a href="#cb8-97"></a><span class="fu">## Regiones más felices.</span></span>
<span id="cb8-98"><a href="#cb8-98"></a></span>
<span id="cb8-99"><a href="#cb8-99"></a>Para comenzar con el análisis lo primero que debemos observar es el siguiente ránking, en este caso, de las regiones más felices. Las diferentes regiones están agrupadas por los datos de los países pertenecientes a dichas regiones, por tanto los 111 países de los que disponemos datos hacen la media del índice resultante por cada región. Por otro lado, las barras del gráfico están ordenadas de mayor a menor índice de felicidad en una escala de 0 a 7,5.</span>
<span id="cb8-100"><a href="#cb8-100"></a>Tal como podemos ver, la región que lidera el índice como región más feliz es la región de Autralia y Nueva Zelanda, seguido de la de Norte América. Mientras que la región a la cola del índice es el África Subsahariana.</span>
<span id="cb8-101"><a href="#cb8-101"></a>Por otra parte, cabe mencionar que la región en la que se encuentra España no está mal situada en el ránking, pues es la tercera, "Western Europe", o como se dice en español, Europa Occidental.</span>
<span id="cb8-102"><a href="#cb8-102"></a> </span>
<span id="cb8-105"><a href="#cb8-105"></a><span class="in">```{r}</span></span>
<span id="cb8-106"><a href="#cb8-106"></a><span class="co">#| echo:false</span></span>
<span id="cb8-107"><a href="#cb8-107"></a></span>
<span id="cb8-108"><a href="#cb8-108"></a><span class="co">#cargamos paquetes</span></span>
<span id="cb8-109"><a href="#cb8-109"></a></span>
<span id="cb8-110"><a href="#cb8-110"></a></span>
<span id="cb8-111"><a href="#cb8-111"></a><span class="fu">library</span>(rio)</span>
<span id="cb8-112"><a href="#cb8-112"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb8-113"><a href="#cb8-113"></a><span class="fu">library</span>(forcats)</span>
<span id="cb8-114"><a href="#cb8-114"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb8-115"><a href="#cb8-115"></a><span class="fu">library</span>(ggThemeAssist)</span>
<span id="cb8-116"><a href="#cb8-116"></a><span class="fu">library</span>(janitor)</span>
<span id="cb8-117"><a href="#cb8-117"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb8-118"><a href="#cb8-118"></a><span class="fu">library</span>(plotly)</span>
<span id="cb8-119"><a href="#cb8-119"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb8-120"><a href="#cb8-120"></a><span class="fu">library</span>(ggThemeAssist)</span>
<span id="cb8-121"><a href="#cb8-121"></a><span class="fu">library</span>(rnaturalearth)</span>
<span id="cb8-122"><a href="#cb8-122"></a><span class="fu">library</span>(rnaturalearthdata)</span>
<span id="cb8-123"><a href="#cb8-123"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb8-124"><a href="#cb8-124"></a><span class="fu">library</span>(viridis)</span>
<span id="cb8-125"><a href="#cb8-125"></a><span class="fu">library</span>(highcharter)</span>
<span id="cb8-126"><a href="#cb8-126"></a><span class="fu">library</span>(treemapify)</span>
<span id="cb8-127"><a href="#cb8-127"></a><span class="fu">library</span>(treemap)</span>
<span id="cb8-128"><a href="#cb8-128"></a></span>
<span id="cb8-129"><a href="#cb8-129"></a><span class="co">#importamos los datos</span></span>
<span id="cb8-130"><a href="#cb8-130"></a></span>
<span id="cb8-131"><a href="#cb8-131"></a><span class="co">#fs::dir_create("datos")</span></span>
<span id="cb8-132"><a href="#cb8-132"></a></span>
<span id="cb8-133"><a href="#cb8-133"></a><span class="co">#importamos los datos de la carpeta datos</span></span>
<span id="cb8-134"><a href="#cb8-134"></a></span>
<span id="cb8-135"><a href="#cb8-135"></a>happy <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(<span class="st">"./datos/happyscore_income.csv"</span>)</span>
<span id="cb8-136"><a href="#cb8-136"></a></span>
<span id="cb8-137"><a href="#cb8-137"></a><span class="co">#limpiar nombres</span></span>
<span id="cb8-138"><a href="#cb8-138"></a></span>
<span id="cb8-139"><a href="#cb8-139"></a>feliz <span class="ot">&lt;-</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>(happy)</span>
<span id="cb8-140"><a href="#cb8-140"></a></span>
<span id="cb8-141"><a href="#cb8-141"></a></span>
<span id="cb8-142"><a href="#cb8-142"></a><span class="co">#Primer grafico (columnas)</span></span>
<span id="cb8-143"><a href="#cb8-143"></a></span>
<span id="cb8-144"><a href="#cb8-144"></a><span class="co">#hacer tabla</span></span>
<span id="cb8-145"><a href="#cb8-145"></a></span>
<span id="cb8-146"><a href="#cb8-146"></a>tabla_1 <span class="ot">&lt;-</span> feliz <span class="sc">%&gt;%</span></span>
<span id="cb8-147"><a href="#cb8-147"></a>           <span class="fu">select</span> (region, happy_score)<span class="sc">%&gt;%</span></span>
<span id="cb8-148"><a href="#cb8-148"></a>           <span class="fu">group_by</span>(region)<span class="sc">%&gt;%</span></span>
<span id="cb8-149"><a href="#cb8-149"></a>           <span class="fu">summarise</span>(<span class="at">media_felicidad_region =</span> <span class="fu">mean</span>(happy_score)) <span class="sc">%&gt;%</span></span>
<span id="cb8-150"><a href="#cb8-150"></a>           <span class="fu">mutate</span>(<span class="at">region =</span> <span class="fu">as_factor</span>(region)) <span class="sc">%&gt;%</span></span>
<span id="cb8-151"><a href="#cb8-151"></a>           <span class="fu">mutate</span>(<span class="at">region =</span> <span class="fu">fct_reorder</span>(region,media_felicidad_region))<span class="sc">%&gt;%</span></span>
<span id="cb8-152"><a href="#cb8-152"></a>           <span class="fu">ungroup</span>()</span>
<span id="cb8-153"><a href="#cb8-153"></a></span>
<span id="cb8-154"><a href="#cb8-154"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(tabla_1 , <span class="fu">aes</span>( media_felicidad_region , region )) <span class="sc">+</span> <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">"khaki1"</span>) <span class="sc">+</span> <span class="fu">lims</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">7.5</span>))</span>
<span id="cb8-155"><a href="#cb8-155"></a></span>
<span id="cb8-156"><a href="#cb8-156"></a>p1 <span class="ot">&lt;-</span> p1 <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">linetype =</span> <span class="st">"blank"</span>),</span>
<span id="cb8-157"><a href="#cb8-157"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_line</span>(<span class="at">linetype =</span> <span class="st">"blank"</span>),</span>
<span id="cb8-158"><a href="#cb8-158"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"AvantGarde"</span>,</span>
<span id="cb8-159"><a href="#cb8-159"></a>        <span class="at">size =</span> <span class="dv">20</span>, <span class="at">face =</span> <span class="st">"italic"</span>, <span class="at">colour =</span> <span class="st">"aquamarine4"</span>),</span>
<span id="cb8-160"><a href="#cb8-160"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"AvantGarde"</span>,</span>
<span id="cb8-161"><a href="#cb8-161"></a>    <span class="at">size =</span> <span class="dv">10</span>, <span class="at">face =</span> <span class="st">"italic"</span>, <span class="at">colour=</span> <span class="st">"aquamarine4"</span>),</span>
<span id="cb8-162"><a href="#cb8-162"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NA</span>)) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"MEDIA DE LA FELICIDAD POR REGIONES "</span>, <span class="at">subtitle =</span> <span class="st">"Media en escala 0 - 7,5"</span>,</span>
<span id="cb8-163"><a href="#cb8-163"></a>    <span class="at">x =</span> <span class="st">"Media felicidad (0 - 7.5)"</span>, <span class="at">y =</span> <span class="cn">NULL</span>)</span>
<span id="cb8-164"><a href="#cb8-164"></a></span>
<span id="cb8-165"><a href="#cb8-165"></a><span class="fu">ggplotly</span>(p1)</span>
<span id="cb8-166"><a href="#cb8-166"></a></span>
<span id="cb8-167"><a href="#cb8-167"></a><span class="in">```</span></span>
<span id="cb8-168"><a href="#cb8-168"></a></span>
<span id="cb8-169"><a href="#cb8-169"></a></span>
<span id="cb8-170"><a href="#cb8-170"></a></span>
<span id="cb8-171"><a href="#cb8-171"></a><span class="fu">## Los datos en números</span></span>
<span id="cb8-172"><a href="#cb8-172"></a></span>
<span id="cb8-173"><a href="#cb8-173"></a>En la siguiente tabla podemos ver parte de los datos en los que se basa el estudio, de izquierda a derecha nos encontramos con los países en primer lugar, seguido del índice de felicidad (escala 0-7.5), media de los ingresos (escala 0-30.000), mediana de los ingresos y desigualdad de ingreso (escala 20-65). Además podemos ver la diferencia entre la media y la mediana para ver como de "fiable" es la media y que no se encuentre desvirtuada por un número reducido de grandes rentas que eleve la media.</span>
<span id="cb8-174"><a href="#cb8-174"></a>Analizando un poco la tabla vemos como los países con menor índice de felicidad, son países con rentas muy bajas, pero aunque guarden una correlación positiva, cabe destacar que esto no implica causalidad, ya que por otro lado podemos observar como Costa Rica, con una media de ingresos bastante baja, es uno de los países con mayor índice de felicidad, o en el otro extremo podemos ver Luxemburgo, donde pese a poseer la media de ingresos más eleveados ni siquiera llega a un 7 en el índice de felicidad.</span>
<span id="cb8-175"><a href="#cb8-175"></a>Así que, resumiendo, pese que haya fuertes correlaciones entre diferentes variables, siempre hay que tener en cuenta otros factores a la hora de analizar las causas, en este caso del índice de felicidad, y explicarlas correctamente.</span>
<span id="cb8-176"><a href="#cb8-176"></a></span>
<span id="cb8-177"><a href="#cb8-177"></a></span>
<span id="cb8-180"><a href="#cb8-180"></a><span class="in">```{r}</span></span>
<span id="cb8-181"><a href="#cb8-181"></a><span class="co">#| echo:false</span></span>
<span id="cb8-182"><a href="#cb8-182"></a></span>
<span id="cb8-183"><a href="#cb8-183"></a><span class="fu">library</span>(rio)</span>
<span id="cb8-184"><a href="#cb8-184"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb8-185"><a href="#cb8-185"></a><span class="fu">library</span>(forcats)</span>
<span id="cb8-186"><a href="#cb8-186"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb8-187"><a href="#cb8-187"></a><span class="fu">library</span>(ggThemeAssist)</span>
<span id="cb8-188"><a href="#cb8-188"></a><span class="fu">library</span>(janitor)</span>
<span id="cb8-189"><a href="#cb8-189"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb8-190"><a href="#cb8-190"></a><span class="fu">library</span>(plotly)</span>
<span id="cb8-191"><a href="#cb8-191"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb8-192"><a href="#cb8-192"></a><span class="fu">library</span>(ggThemeAssist)</span>
<span id="cb8-193"><a href="#cb8-193"></a><span class="fu">library</span>(rnaturalearth)</span>
<span id="cb8-194"><a href="#cb8-194"></a><span class="fu">library</span>(rnaturalearthdata)</span>
<span id="cb8-195"><a href="#cb8-195"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb8-196"><a href="#cb8-196"></a><span class="fu">library</span>(viridis)</span>
<span id="cb8-197"><a href="#cb8-197"></a><span class="fu">library</span>(highcharter)</span>
<span id="cb8-198"><a href="#cb8-198"></a><span class="fu">library</span>(treemapify)</span>
<span id="cb8-199"><a href="#cb8-199"></a><span class="fu">library</span>(treemap)</span>
<span id="cb8-200"><a href="#cb8-200"></a></span>
<span id="cb8-201"><a href="#cb8-201"></a></span>
<span id="cb8-202"><a href="#cb8-202"></a><span class="co">#fs::dir_create("datos")</span></span>
<span id="cb8-203"><a href="#cb8-203"></a></span>
<span id="cb8-204"><a href="#cb8-204"></a><span class="co">#importamos los datos de la carpeta datos</span></span>
<span id="cb8-205"><a href="#cb8-205"></a></span>
<span id="cb8-206"><a href="#cb8-206"></a>happy <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(<span class="st">"./datos/happyscore_income.csv"</span>)</span>
<span id="cb8-207"><a href="#cb8-207"></a></span>
<span id="cb8-208"><a href="#cb8-208"></a><span class="co">#limpiar nombres</span></span>
<span id="cb8-209"><a href="#cb8-209"></a></span>
<span id="cb8-210"><a href="#cb8-210"></a>feliz <span class="ot">&lt;-</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>(happy)</span>
<span id="cb8-211"><a href="#cb8-211"></a></span>
<span id="cb8-212"><a href="#cb8-212"></a><span class="co">#TABLA</span></span>
<span id="cb8-213"><a href="#cb8-213"></a></span>
<span id="cb8-214"><a href="#cb8-214"></a>tabla_t <span class="ot">&lt;-</span> feliz <span class="sc">%&gt;%</span></span>
<span id="cb8-215"><a href="#cb8-215"></a>           <span class="fu">select</span>(country, happy_score,avg_income,median_income,income_inequality)<span class="sc">%&gt;%</span></span>
<span id="cb8-216"><a href="#cb8-216"></a>           <span class="fu">mutate</span>(<span class="at">diferencia_media_mediana =</span> avg_income<span class="sc">-</span>median_income, <span class="at">.before =</span> income_inequality) <span class="sc">%&gt;%</span></span>
<span id="cb8-217"><a href="#cb8-217"></a>  <span class="fu">mutate_if</span>(is.numeric, <span class="fu">funs</span>(<span class="fu">round</span>(., <span class="dv">2</span>)))</span>
<span id="cb8-218"><a href="#cb8-218"></a></span>
<span id="cb8-219"><a href="#cb8-219"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(tabla_t)</span>
<span id="cb8-220"><a href="#cb8-220"></a></span>
<span id="cb8-221"><a href="#cb8-221"></a></span>
<span id="cb8-222"><a href="#cb8-222"></a><span class="in">```</span></span>
<span id="cb8-223"><a href="#cb8-223"></a></span>
<span id="cb8-224"><a href="#cb8-224"></a><span class="fu">## Correlación entre PIB y felicidad</span></span>
<span id="cb8-225"><a href="#cb8-225"></a></span>
<span id="cb8-226"><a href="#cb8-226"></a>Tal como veníamos hablando, existe una correlación positiva entre el nivel de ingresos y la felicidad, y la mejor forma de entenderlo es viéndolo.</span>
<span id="cb8-227"><a href="#cb8-227"></a>En el siguiente gráfico podemos observar como a medida que aumenta el PIB de los países, aumenta también el índice de felicidad. Por lo que, aunque sí es cierto que hay diferentes factores que explican el ratio de felicidad y no solo nos podemos centrar en una variable explicativa, existe una tendencia clara entre el PIB y la felicidad, es decir, un PIB mayor y todo lo que eso conlleva, mejor educación; mejores sistemas sanitarios; mejores infraestructuras o mayores oportunidades laborales; etc, hace que el índice de felicidad aumente a medida que aumenta el PIB. Obviamente no será esta variable la única causa explicativa, ya que, por ejemplo, podrán haber países con PIB muy elevados pero que en cambio existan grandes desigualdades.</span>
<span id="cb8-228"><a href="#cb8-228"></a></span>
<span id="cb8-231"><a href="#cb8-231"></a><span class="in">```{r}</span></span>
<span id="cb8-232"><a href="#cb8-232"></a><span class="co">#| echo:false</span></span>
<span id="cb8-233"><a href="#cb8-233"></a></span>
<span id="cb8-234"><a href="#cb8-234"></a><span class="co">#cargamos paquetes</span></span>
<span id="cb8-235"><a href="#cb8-235"></a></span>
<span id="cb8-236"><a href="#cb8-236"></a></span>
<span id="cb8-237"><a href="#cb8-237"></a><span class="fu">library</span>(rio)</span>
<span id="cb8-238"><a href="#cb8-238"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb8-239"><a href="#cb8-239"></a><span class="fu">library</span>(forcats)</span>
<span id="cb8-240"><a href="#cb8-240"></a><span class="fu">library</span> (ggthemes)</span>
<span id="cb8-241"><a href="#cb8-241"></a><span class="fu">library</span>(ggThemeAssist)</span>
<span id="cb8-242"><a href="#cb8-242"></a><span class="fu">library</span>(janitor)</span>
<span id="cb8-243"><a href="#cb8-243"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb8-244"><a href="#cb8-244"></a><span class="fu">library</span>(plotly)</span>
<span id="cb8-245"><a href="#cb8-245"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb8-246"><a href="#cb8-246"></a><span class="fu">library</span>(ggThemeAssist)</span>
<span id="cb8-247"><a href="#cb8-247"></a><span class="fu">library</span>(rnaturalearth)</span>
<span id="cb8-248"><a href="#cb8-248"></a><span class="fu">library</span>(rnaturalearthdata)</span>
<span id="cb8-249"><a href="#cb8-249"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb8-250"><a href="#cb8-250"></a><span class="fu">library</span>(viridis)</span>
<span id="cb8-251"><a href="#cb8-251"></a><span class="fu">library</span>(highcharter)</span>
<span id="cb8-252"><a href="#cb8-252"></a><span class="fu">library</span>(treemapify)</span>
<span id="cb8-253"><a href="#cb8-253"></a><span class="fu">library</span>(treemap)</span>
<span id="cb8-254"><a href="#cb8-254"></a></span>
<span id="cb8-255"><a href="#cb8-255"></a><span class="co">#importamos los datos</span></span>
<span id="cb8-256"><a href="#cb8-256"></a></span>
<span id="cb8-257"><a href="#cb8-257"></a><span class="co">#fs::dir_create("datos")</span></span>
<span id="cb8-258"><a href="#cb8-258"></a></span>
<span id="cb8-259"><a href="#cb8-259"></a><span class="co">#importamos los datos de la carpeta datos</span></span>
<span id="cb8-260"><a href="#cb8-260"></a></span>
<span id="cb8-261"><a href="#cb8-261"></a>happy <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(<span class="st">"./datos/happyscore_income.csv"</span>)</span>
<span id="cb8-262"><a href="#cb8-262"></a></span>
<span id="cb8-263"><a href="#cb8-263"></a><span class="co">#limpiar nombres</span></span>
<span id="cb8-264"><a href="#cb8-264"></a></span>
<span id="cb8-265"><a href="#cb8-265"></a>feliz <span class="ot">&lt;-</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>(happy)</span>
<span id="cb8-266"><a href="#cb8-266"></a></span>
<span id="cb8-267"><a href="#cb8-267"></a><span class="co">#Hacemos la tabla</span></span>
<span id="cb8-268"><a href="#cb8-268"></a></span>
<span id="cb8-269"><a href="#cb8-269"></a>tabla_2 <span class="ot">&lt;-</span> feliz <span class="sc">%&gt;%</span></span>
<span id="cb8-270"><a href="#cb8-270"></a>  <span class="fu">select</span> (region, happy_score, gdp, country)</span>
<span id="cb8-271"><a href="#cb8-271"></a></span>
<span id="cb8-272"><a href="#cb8-272"></a><span class="co">#hacer gráfico_2.1</span></span>
<span id="cb8-273"><a href="#cb8-273"></a></span>
<span id="cb8-274"><a href="#cb8-274"></a>p2_1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(tabla_2 , <span class="fu">aes</span>(<span class="at">x =</span> gdp, <span class="at">y =</span> happy_score)) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color=</span> region)) <span class="sc">+</span> <span class="fu">geom_smooth</span>()</span>
<span id="cb8-275"><a href="#cb8-275"></a></span>
<span id="cb8-276"><a href="#cb8-276"></a></span>
<span id="cb8-277"><a href="#cb8-277"></a>p2_1 <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"AvantGarde"</span>),</span>
<span id="cb8-278"><a href="#cb8-278"></a>           <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"AvantGarde"</span>, <span class="at">face =</span> <span class="st">"bold"</span>), <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"whitesmoke"</span>,    <span class="at">linetype =</span> <span class="st">"dotted"</span>)) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"ÍNDICE FELICIDAD EN RELACIÓN AL PIB"</span>, <span class="at">x =</span> <span class="st">"PIB (0 - 1.6)"</span>, <span class="at">y =</span> <span class="st">"Índice felicidad (2.5 - 8)"</span>,<span class="at">colour =</span> <span class="st">"Regiones"</span>) </span>
<span id="cb8-279"><a href="#cb8-279"></a></span>
<span id="cb8-280"><a href="#cb8-280"></a></span>
<span id="cb8-281"><a href="#cb8-281"></a><span class="in">```</span></span>
<span id="cb8-282"><a href="#cb8-282"></a></span>
<span id="cb8-283"><a href="#cb8-283"></a></span>
<span id="cb8-284"><a href="#cb8-284"></a><span class="fu">### Ahora por regiones</span></span>
<span id="cb8-285"><a href="#cb8-285"></a></span>
<span id="cb8-286"><a href="#cb8-286"></a>Siguiendo con la línea de la correlación entre PIB y felicidad, en el siguiente gráfico podemos ver lo mismo que en el de arriba pero dividido por regiones para  poder ver con mayor detalle la correlación que hay entre el PIB y el índice de felicidad en cada región. </span>
<span id="cb8-287"><a href="#cb8-287"></a>Separando el gráfico por regiones podemos observar por ejemplo como en la región de Europa Occidental un aumento del PIB supone un aumento mayor al proporcional de la felicidad.</span>
<span id="cb8-288"><a href="#cb8-288"></a>Tambíen vemos otro caso llamativo, que es la región de Asia del Sur("Southern Asia"), donde precisamente en esta región existe una correlación negativa, pues a medida que aumenta el PIB disminuye la felicidad, esto nos muestra el ejemplo perfecto de que aunque hayamos visto en el otro gráfico que existía una correlación general positiva, esta no explica causalidad, ya que Asia del Sur rompe así la hipótesis de que el PIB sea el causante directo, o única varible explicativa, del aumento de la felicidad.</span>
<span id="cb8-289"><a href="#cb8-289"></a></span>
<span id="cb8-290"><a href="#cb8-290"></a></span>
<span id="cb8-291"><a href="#cb8-291"></a></span>
<span id="cb8-294"><a href="#cb8-294"></a><span class="in">```{r}</span></span>
<span id="cb8-295"><a href="#cb8-295"></a><span class="co">#| echo:false</span></span>
<span id="cb8-296"><a href="#cb8-296"></a></span>
<span id="cb8-297"><a href="#cb8-297"></a></span>
<span id="cb8-298"><a href="#cb8-298"></a><span class="co">#cargamos paquetes</span></span>
<span id="cb8-299"><a href="#cb8-299"></a></span>
<span id="cb8-300"><a href="#cb8-300"></a></span>
<span id="cb8-301"><a href="#cb8-301"></a><span class="fu">library</span>(rio)</span>
<span id="cb8-302"><a href="#cb8-302"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb8-303"><a href="#cb8-303"></a><span class="fu">library</span>(forcats)</span>
<span id="cb8-304"><a href="#cb8-304"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb8-305"><a href="#cb8-305"></a><span class="fu">library</span>(ggThemeAssist)</span>
<span id="cb8-306"><a href="#cb8-306"></a><span class="fu">library</span>(janitor)</span>
<span id="cb8-307"><a href="#cb8-307"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb8-308"><a href="#cb8-308"></a><span class="fu">library</span>(plotly)</span>
<span id="cb8-309"><a href="#cb8-309"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb8-310"><a href="#cb8-310"></a><span class="fu">library</span>(ggThemeAssist)</span>
<span id="cb8-311"><a href="#cb8-311"></a><span class="fu">library</span>(rnaturalearth)</span>
<span id="cb8-312"><a href="#cb8-312"></a><span class="fu">library</span>(rnaturalearthdata)</span>
<span id="cb8-313"><a href="#cb8-313"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb8-314"><a href="#cb8-314"></a><span class="fu">library</span>(viridis)</span>
<span id="cb8-315"><a href="#cb8-315"></a><span class="fu">library</span>(highcharter)</span>
<span id="cb8-316"><a href="#cb8-316"></a><span class="fu">library</span>(treemapify)</span>
<span id="cb8-317"><a href="#cb8-317"></a><span class="fu">library</span>(treemap)</span>
<span id="cb8-318"><a href="#cb8-318"></a></span>
<span id="cb8-319"><a href="#cb8-319"></a><span class="co">#importamos los datos</span></span>
<span id="cb8-320"><a href="#cb8-320"></a></span>
<span id="cb8-321"><a href="#cb8-321"></a><span class="co">#fs::dir_create("datos")</span></span>
<span id="cb8-322"><a href="#cb8-322"></a></span>
<span id="cb8-323"><a href="#cb8-323"></a><span class="co">#importamos los datos de la carpeta datos</span></span>
<span id="cb8-324"><a href="#cb8-324"></a></span>
<span id="cb8-325"><a href="#cb8-325"></a>happy <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(<span class="st">"./datos/happyscore_income.csv"</span>)</span>
<span id="cb8-326"><a href="#cb8-326"></a></span>
<span id="cb8-327"><a href="#cb8-327"></a><span class="co">#limpiar nombres</span></span>
<span id="cb8-328"><a href="#cb8-328"></a></span>
<span id="cb8-329"><a href="#cb8-329"></a>feliz <span class="ot">&lt;-</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>(happy)</span>
<span id="cb8-330"><a href="#cb8-330"></a></span>
<span id="cb8-331"><a href="#cb8-331"></a><span class="co">#Segundo gráfico (facet por region)</span></span>
<span id="cb8-332"><a href="#cb8-332"></a></span>
<span id="cb8-333"><a href="#cb8-333"></a><span class="co">#Hacer tabla</span></span>
<span id="cb8-334"><a href="#cb8-334"></a></span>
<span id="cb8-335"><a href="#cb8-335"></a></span>
<span id="cb8-336"><a href="#cb8-336"></a>tabla_2 <span class="ot">&lt;-</span> feliz <span class="sc">%&gt;%</span></span>
<span id="cb8-337"><a href="#cb8-337"></a>  <span class="fu">select</span> (region, happy_score, gdp, country)</span>
<span id="cb8-338"><a href="#cb8-338"></a></span>
<span id="cb8-339"><a href="#cb8-339"></a><span class="co">#hacer gráfico</span></span>
<span id="cb8-340"><a href="#cb8-340"></a></span>
<span id="cb8-341"><a href="#cb8-341"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(tabla_2) <span class="sc">+</span></span>
<span id="cb8-342"><a href="#cb8-342"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> gdp, <span class="at">y =</span> happy_score, <span class="at">colour =</span> region)) <span class="sc">+</span></span>
<span id="cb8-343"><a href="#cb8-343"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(region))</span>
<span id="cb8-344"><a href="#cb8-344"></a></span>
<span id="cb8-345"><a href="#cb8-345"></a></span>
<span id="cb8-346"><a href="#cb8-346"></a>p2 <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"AvantGarde"</span>),</span>
<span id="cb8-347"><a href="#cb8-347"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"AvantGarde"</span>,</span>
<span id="cb8-348"><a href="#cb8-348"></a>        <span class="at">face =</span> <span class="st">"bold"</span>), <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"whitesmoke"</span>,</span>
<span id="cb8-349"><a href="#cb8-349"></a>        <span class="at">linetype =</span> <span class="st">"dotted"</span>)) <span class="sc">+</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"ÍNDICE FELICIDAD EN RELACIÓN AL PIB"</span>,</span>
<span id="cb8-350"><a href="#cb8-350"></a>    <span class="at">x =</span> <span class="st">"PIB (0 - 1.6)"</span>, <span class="at">y =</span> <span class="st">"Índice felicidad (2.5 - 8)"</span>,</span>
<span id="cb8-351"><a href="#cb8-351"></a>    <span class="at">colour =</span> <span class="st">"Regiones"</span>)</span>
<span id="cb8-352"><a href="#cb8-352"></a></span>
<span id="cb8-353"><a href="#cb8-353"></a></span>
<span id="cb8-354"><a href="#cb8-354"></a></span>
<span id="cb8-355"><a href="#cb8-355"></a><span class="in">```</span></span>
<span id="cb8-356"><a href="#cb8-356"></a></span>
<span id="cb8-357"><a href="#cb8-357"></a></span>
<span id="cb8-358"><a href="#cb8-358"></a><span class="fu">## Desigualdad y felicidad por países </span></span>
<span id="cb8-359"><a href="#cb8-359"></a></span>
<span id="cb8-360"><a href="#cb8-360"></a>Como veníamos diciendo el PIB no puede determinar de forma aislada el índice de felicidad, puesto que hay otros causantes, como la desigualdad, que también pueden explicar los distintos niveles de felicidad.</span>
<span id="cb8-361"><a href="#cb8-361"></a>En el siguiente mapa se pueden ver los índices de desigualdad por países agrupados en cuatro niveles según el grado de desigualdad en una escala de 1 a 4, donde los países pertenecientes al primer grupo son los países con menor desigualdad de ingresos, siendo el cuarto grupo el que nos indica los países con mayores desigualdades.</span>
<span id="cb8-362"><a href="#cb8-362"></a>Si comparamos con el mapa de la felicidad, el cual también está agrupado por niveles de felicidad en una escala del 1 al 4, donde los países del nivel uno tienen los índices de felicidad más bajos y los países de nivel cuatro los que mayor índice tienen, podemos observar, por ejemplo, correlaciones positivas entre los países nórdicos donde índices muy bajos de desigualdad implican niveles muy altos de felicidad.</span>
<span id="cb8-363"><a href="#cb8-363"></a>En cambio toda la región de América tiene unos índices elevados de forma generalizada y en cambio también tiene unos índices altos de desigualdad, por lo que deja de haber una correlación positiva.</span>
<span id="cb8-364"><a href="#cb8-364"></a></span>
<span id="cb8-367"><a href="#cb8-367"></a><span class="in">```{r}</span></span>
<span id="cb8-368"><a href="#cb8-368"></a><span class="co">#| echo:false</span></span>
<span id="cb8-369"><a href="#cb8-369"></a></span>
<span id="cb8-370"><a href="#cb8-370"></a></span>
<span id="cb8-371"><a href="#cb8-371"></a><span class="fu">library</span>(rio)</span>
<span id="cb8-372"><a href="#cb8-372"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb8-373"><a href="#cb8-373"></a><span class="fu">library</span>(forcats)</span>
<span id="cb8-374"><a href="#cb8-374"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb8-375"><a href="#cb8-375"></a><span class="fu">library</span>(ggThemeAssist)</span>
<span id="cb8-376"><a href="#cb8-376"></a><span class="fu">library</span>(janitor)</span>
<span id="cb8-377"><a href="#cb8-377"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb8-378"><a href="#cb8-378"></a><span class="fu">library</span>(plotly)</span>
<span id="cb8-379"><a href="#cb8-379"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb8-380"><a href="#cb8-380"></a><span class="fu">library</span>(ggThemeAssist)</span>
<span id="cb8-381"><a href="#cb8-381"></a><span class="fu">library</span>(rnaturalearth)</span>
<span id="cb8-382"><a href="#cb8-382"></a><span class="fu">library</span>(rnaturalearthdata)</span>
<span id="cb8-383"><a href="#cb8-383"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb8-384"><a href="#cb8-384"></a><span class="fu">library</span>(viridis)</span>
<span id="cb8-385"><a href="#cb8-385"></a><span class="fu">library</span>(highcharter)</span>
<span id="cb8-386"><a href="#cb8-386"></a><span class="fu">library</span>(treemapify)</span>
<span id="cb8-387"><a href="#cb8-387"></a><span class="fu">library</span>(treemap)</span>
<span id="cb8-388"><a href="#cb8-388"></a></span>
<span id="cb8-389"><a href="#cb8-389"></a></span>
<span id="cb8-390"><a href="#cb8-390"></a><span class="co">#fs::dir_create("datos")</span></span>
<span id="cb8-391"><a href="#cb8-391"></a></span>
<span id="cb8-392"><a href="#cb8-392"></a><span class="co">#importamos los datos de la carpeta datos</span></span>
<span id="cb8-393"><a href="#cb8-393"></a></span>
<span id="cb8-394"><a href="#cb8-394"></a>happy <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(<span class="st">"./datos/happyscore_income.csv"</span>)</span>
<span id="cb8-395"><a href="#cb8-395"></a></span>
<span id="cb8-396"><a href="#cb8-396"></a><span class="co">#limpiar nombres</span></span>
<span id="cb8-397"><a href="#cb8-397"></a></span>
<span id="cb8-398"><a href="#cb8-398"></a>feliz <span class="ot">&lt;-</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>(happy)</span>
<span id="cb8-399"><a href="#cb8-399"></a></span>
<span id="cb8-400"><a href="#cb8-400"></a></span>
<span id="cb8-401"><a href="#cb8-401"></a><span class="co">#MAPA 2</span></span>
<span id="cb8-402"><a href="#cb8-402"></a></span>
<span id="cb8-403"><a href="#cb8-403"></a><span class="co">#Hacer tabla</span></span>
<span id="cb8-404"><a href="#cb8-404"></a></span>
<span id="cb8-405"><a href="#cb8-405"></a>tabla_m <span class="ot">&lt;-</span> feliz <span class="sc">%&gt;%</span></span>
<span id="cb8-406"><a href="#cb8-406"></a>  <span class="fu">select</span>(country,income_inequality)</span>
<span id="cb8-407"><a href="#cb8-407"></a></span>
<span id="cb8-408"><a href="#cb8-408"></a><span class="co">#mapa</span></span>
<span id="cb8-409"><a href="#cb8-409"></a></span>
<span id="cb8-410"><a href="#cb8-410"></a>world <span class="ot">&lt;-</span> rnaturalearth<span class="sc">::</span><span class="fu">ne_countries</span>(<span class="at">scale =</span> <span class="st">"medium"</span>, <span class="at">returnclass =</span> <span class="st">"sf"</span>)</span>
<span id="cb8-411"><a href="#cb8-411"></a></span>
<span id="cb8-412"><a href="#cb8-412"></a>world <span class="ot">&lt;-</span> world <span class="sc">%&gt;%</span> <span class="fu">filter</span>(subregion <span class="sc">!=</span> <span class="st">"Antarctica"</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(admin <span class="sc">!=</span> <span class="st">"Greenland"</span>)</span>
<span id="cb8-413"><a href="#cb8-413"></a></span>
<span id="cb8-414"><a href="#cb8-414"></a>world <span class="ot">&lt;-</span> world <span class="sc">%&gt;%</span> <span class="fu">select</span>(name, iso_a3, geometry)</span>
<span id="cb8-415"><a href="#cb8-415"></a></span>
<span id="cb8-416"><a href="#cb8-416"></a>df_world <span class="ot">&lt;-</span> <span class="fu">left_join</span>(world, tabla_m, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"name"</span> <span class="ot">=</span> <span class="st">"country"</span>) ) <span class="sc">%&gt;%</span></span>
<span id="cb8-417"><a href="#cb8-417"></a>  <span class="co">#filter(!is.na(iso_a3)) %&gt;%</span></span>
<span id="cb8-418"><a href="#cb8-418"></a>  <span class="fu">mutate</span>(<span class="at">income_inequality_4 =</span> <span class="fu">as_factor</span>(<span class="fu">ntile</span>(income_inequality, <span class="dv">4</span>)))</span>
<span id="cb8-419"><a href="#cb8-419"></a></span>
<span id="cb8-420"><a href="#cb8-420"></a>p3 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_world) <span class="sc">+</span> <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">geometry =</span> geometry, <span class="at">fill =</span> income_inequality_4)) </span>
<span id="cb8-421"><a href="#cb8-421"></a></span>
<span id="cb8-422"><a href="#cb8-422"></a></span>
<span id="cb8-423"><a href="#cb8-423"></a>p3 <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"mono"</span>,</span>
<span id="cb8-424"><a href="#cb8-424"></a>                                     <span class="at">hjust =</span> <span class="fl">0.5</span>), <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NA</span>)) <span class="sc">+</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"ÍNDICE DE DESIGUALDAD POR PAÍSES"</span>, <span class="at">fill =</span> <span class="st">"Desigualdad "</span>) </span>
<span id="cb8-425"><a href="#cb8-425"></a></span>
<span id="cb8-426"><a href="#cb8-426"></a><span class="co">#mapa felicidad</span></span>
<span id="cb8-427"><a href="#cb8-427"></a></span>
<span id="cb8-428"><a href="#cb8-428"></a>tabla_3 <span class="ot">&lt;-</span> feliz <span class="sc">%&gt;%</span></span>
<span id="cb8-429"><a href="#cb8-429"></a>           <span class="fu">select</span>(country,happy_score)</span>
<span id="cb8-430"><a href="#cb8-430"></a></span>
<span id="cb8-431"><a href="#cb8-431"></a><span class="co">#mapa</span></span>
<span id="cb8-432"><a href="#cb8-432"></a></span>
<span id="cb8-433"><a href="#cb8-433"></a>world <span class="ot">&lt;-</span> rnaturalearth<span class="sc">::</span><span class="fu">ne_countries</span>(<span class="at">scale =</span> <span class="st">"medium"</span>, <span class="at">returnclass =</span> <span class="st">"sf"</span>)</span>
<span id="cb8-434"><a href="#cb8-434"></a></span>
<span id="cb8-435"><a href="#cb8-435"></a>world <span class="ot">&lt;-</span> world <span class="sc">%&gt;%</span> <span class="fu">filter</span>(subregion <span class="sc">!=</span> <span class="st">"Antarctica"</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(admin <span class="sc">!=</span> <span class="st">"Greenland"</span>)</span>
<span id="cb8-436"><a href="#cb8-436"></a></span>
<span id="cb8-437"><a href="#cb8-437"></a>world <span class="ot">&lt;-</span> world <span class="sc">%&gt;%</span> <span class="fu">select</span>(name, iso_a3, geometry)</span>
<span id="cb8-438"><a href="#cb8-438"></a></span>
<span id="cb8-439"><a href="#cb8-439"></a>df_world <span class="ot">&lt;-</span> <span class="fu">left_join</span>(world, tabla_3, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"name"</span> <span class="ot">=</span> <span class="st">"country"</span>) ) <span class="sc">%&gt;%</span></span>
<span id="cb8-440"><a href="#cb8-440"></a>            <span class="co">#filter(!is.na(iso_a3)) %&gt;%</span></span>
<span id="cb8-441"><a href="#cb8-441"></a>            <span class="fu">mutate</span>(<span class="at">happy_score_4 =</span> <span class="fu">as_factor</span>(<span class="fu">ntile</span>(happy_score, <span class="dv">4</span>)))</span>
<span id="cb8-442"><a href="#cb8-442"></a></span>
<span id="cb8-443"><a href="#cb8-443"></a>p3 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_world) <span class="sc">+</span> <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">geometry =</span> geometry, <span class="at">fill =</span> happy_score_4)) </span>
<span id="cb8-444"><a href="#cb8-444"></a></span>
<span id="cb8-445"><a href="#cb8-445"></a></span>
<span id="cb8-446"><a href="#cb8-446"></a>p3 <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"mono"</span>,</span>
<span id="cb8-447"><a href="#cb8-447"></a>    <span class="at">hjust =</span> <span class="fl">0.5</span>), <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NA</span>)) <span class="sc">+</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">" ÍNDICE DE FELICIDAD POR PAÍSES"</span>,</span>
<span id="cb8-448"><a href="#cb8-448"></a>    <span class="at">fill =</span> <span class="st">"Felicidad "</span>) <span class="sc">+</span> <span class="fu">scale_fill_viridis_d</span>() </span>
<span id="cb8-449"><a href="#cb8-449"></a></span>
<span id="cb8-450"><a href="#cb8-450"></a></span>
<span id="cb8-451"><a href="#cb8-451"></a></span>
<span id="cb8-452"><a href="#cb8-452"></a></span>
<span id="cb8-453"><a href="#cb8-453"></a></span>
<span id="cb8-454"><a href="#cb8-454"></a><span class="in">```</span></span>
<span id="cb8-455"><a href="#cb8-455"></a></span>
<span id="cb8-456"><a href="#cb8-456"></a><span class="fu"># Conclusiones</span></span>
<span id="cb8-457"><a href="#cb8-457"></a></span>
<span id="cb8-458"><a href="#cb8-458"></a>Después de haber visto las relaciones que tienen el PIB y la desigualdad con la felicidad, y dejar claro que las correlaciones no implican causalidad y haberlo ejemplificdo con los distintos casos, solo cabe decir que la felicidad como variable dependiente es diferente en cada país, y estará constituida a su vez por diferentes variables explicativas con parámetros disintos, por lo que dependiendo de cada país, el PIB; la desigualdad; las costumbres o incluso el clima; entre otros, afectarán y explicarán de manera distinta los índices de felicidad.</span>
<span id="cb8-459"><a href="#cb8-459"></a>Y aunque las correlaciones nos puedan mostrar que pueden haber modelos parecidos entre países, las tendencias no serán nunca decisivas en la explicación de los disferentes modelos.</span>
<span id="cb8-460"><a href="#cb8-460"></a></span>
<span id="cb8-461"><a href="#cb8-461"></a>---</span>
<span id="cb8-462"><a href="#cb8-462"></a></span>
<span id="cb8-463"><a href="#cb8-463"></a>Para felicidad la de este niño, peace and love!!</span>
<span id="cb8-464"><a href="#cb8-464"></a></span>
<span id="cb8-465"><a href="#cb8-465"></a><span class="kw">&lt;center&gt;&lt;img</span> <span class="er">src</span><span class="ot">=</span><span class="st">"imagenes/niño.png"</span> <span class="er">width</span> <span class="ot">=</span> <span class="st">"500px"</span> <span class="kw">/&gt;&lt;/center&gt;</span></span>
<span id="cb8-466"><a href="#cb8-466"></a></span>
<span id="cb8-467"><a href="#cb8-467"></a><span class="kw">&lt;br&gt;</span></span>
<span id="cb8-468"><a href="#cb8-468"></a></span>
<span id="cb8-469"><a href="#cb8-469"></a>---</span>
<span id="cb8-470"><a href="#cb8-470"></a></span>
<span id="cb8-471"><a href="#cb8-471"></a><span class="kw">&lt;br&gt;</span></span>
<span id="cb8-472"><a href="#cb8-472"></a></span>
<span id="cb8-473"><a href="#cb8-473"></a><span class="fu">### Información sobre la sesión</span></span>
<span id="cb8-474"><a href="#cb8-474"></a></span>
<span id="cb8-475"><a href="#cb8-475"></a>Abajo muestro mi entorno de trabajo y paquetes utilizados</span>
<span id="cb8-476"><a href="#cb8-476"></a></span>
<span id="cb8-479"><a href="#cb8-479"></a><span class="in">```{r}</span></span>
<span id="cb8-480"><a href="#cb8-480"></a><span class="co">#| echo: false</span></span>
<span id="cb8-481"><a href="#cb8-481"></a>sessioninfo<span class="sc">::</span><span class="fu">session_info</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb8-482"><a href="#cb8-482"></a>  details<span class="sc">::</span><span class="fu">details</span>(<span class="at">summary =</span> <span class="st">'current session info'</span>) </span>
<span id="cb8-483"><a href="#cb8-483"></a><span class="in">```</span></span>
<span id="cb8-484"><a href="#cb8-484"></a></span>
<span id="cb8-485"><a href="#cb8-485"></a></span>
</code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">© 2022 Vera Monteagudo</div>   
      <div class="nav-footer-center">Hecho con <a href="https://quarto.org">Quarto</a></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
<li class="nav-item compact">
    <a class="nav-link" href="https://github.com/<tu-usuario-github>">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/<tu-usuario-twitter>">
      <i class="bi bi-twitter" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="mailto:vemonse@alumni.uv.es">
      <i class="bi bi-envelope" role="img">
</i> 
    </a>
  </li>  
</ul>
</div>
  </div>
</footer>


<script src="site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>