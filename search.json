[
  {
    "objectID": "my_trabajo_BigData.html",
    "href": "my_trabajo_BigData.html",
    "title": "La felicidad en relación a la renta",
    "section": "",
    "text": "¿Cómo somos de felices?, ¿Cómo afectan los ingresos, el PIB o la desigualdad en la percepción que tenemos de felicidad?. Pues precisamente de esto es de lo que vamos a hablar aquí, veremos si exsiste una fórmula precisa de poder medir las causas de la felicidad de la gente… o no. Veremos también las correlaciones entre las felicidad y los ingresos, así como la correlación con la desigualdad, y si esto es determinante para poder sacar una conclusión sólida acerca de los niveles de felicidad."
  },
  {
    "objectID": "my_trabajo_BigData.html#regiones-más-felices.",
    "href": "my_trabajo_BigData.html#regiones-más-felices.",
    "title": "La felicidad en relación a la renta",
    "section": "Regiones más felices.",
    "text": "Regiones más felices.\nPara comenzar con el análisis lo primero que debemos observar es el siguiente ránking, en este caso, de las regiones más felices. Las diferentes regiones están agrupadas por los datos de los países pertenecientes a dichas regiones, por tanto los 111 países de los que disponemos datos hacen la media del índice resultante por cada región. Por otro lado, las barras del gráfico están ordenadas de mayor a menor índice de felicidad en una escala de 0 a 7,5. Tal como podemos ver, la región que lidera el índice como región más feliz es la región de Autralia y Nueva Zelanda, seguido de la de Norte América. Mientras que la región a la cola del índice es el África Subsahariana. Por otra parte, cabe mencionar que la región en la que se encuentra España no está mal situada en el ránking, pues es la tercera, “Western Europe”, o como se dice en español, Europa Occidental.\n\nCódigo\n#| echo:false\n\n#cargamos paquetes\n\n\nlibrary(rio)\nlibrary(tidyverse)\nlibrary(forcats)\nlibrary(ggthemes)\nlibrary(ggThemeAssist)\nlibrary(janitor)\nlibrary(dplyr)\nlibrary(plotly)\nlibrary(gganimate)\nlibrary(ggThemeAssist)\nlibrary(rnaturalearth)\nlibrary(rnaturalearthdata)\nlibrary(gapminder)\nlibrary(viridis)\nlibrary(highcharter)\nlibrary(treemapify)\nlibrary(treemap)\n\n#importamos los datos\n\n#fs::dir_create(\"datos\")\n\n#importamos los datos de la carpeta datos\n\nhappy <- rio::import(\"./datos/happyscore_income.csv\")\n\n#limpiar nombres\n\nfeliz <- janitor::clean_names(happy)\n\n\n#Primer grafico (columnas)\n\n#hacer tabla\n\ntabla_1 <- feliz %>%\n           select (region, happy_score)%>%\n           group_by(region)%>%\n           summarise(media_felicidad_region = mean(happy_score)) %>%\n           mutate(region = as_factor(region)) %>%\n           mutate(region = fct_reorder(region,media_felicidad_region))%>%\n           ungroup()\n\np1 <- ggplot(tabla_1 , aes( media_felicidad_region , region )) + geom_col(fill = \"khaki1\") + lims(x = c(0,7.5))\n\np1 <- p1 + theme(panel.grid.major = element_line(linetype = \"blank\"),\n    panel.grid.minor = element_line(linetype = \"blank\"),\n    plot.title = element_text(family = \"AvantGarde\",\n        size = 20, face = \"italic\", colour = \"aquamarine4\"),\n    plot.subtitle = element_text(family = \"AvantGarde\",\n    size = 10, face = \"italic\", colour= \"aquamarine4\"),\n    panel.background = element_rect(fill = NA)) + labs(title = \"MEDIA DE LA FELICIDAD POR REGIONES \", subtitle = \"Media en escala 0 - 7,5\",\n    x = \"Media felicidad (0 - 7.5)\", y = NULL)\n\nggplotly(p1)"
  },
  {
    "objectID": "my_trabajo_BigData.html#datos-en-números",
    "href": "my_trabajo_BigData.html#datos-en-números",
    "title": "La felicidad en relación a la renta",
    "section": "Datos en números",
    "text": "Datos en números\n\nCódigo\n#| echo:false\n\nlibrary(rio)\nlibrary(tidyverse)\nlibrary(forcats)\nlibrary(ggthemes)\nlibrary(ggThemeAssist)\nlibrary(janitor)\nlibrary(dplyr)\nlibrary(plotly)\nlibrary(gganimate)\nlibrary(ggThemeAssist)\nlibrary(rnaturalearth)\nlibrary(rnaturalearthdata)\nlibrary(gapminder)\nlibrary(viridis)\nlibrary(highcharter)\nlibrary(treemapify)\nlibrary(treemap)\n\n\n#fs::dir_create(\"datos\")\n\n#importamos los datos de la carpeta datos\n\nhappy <- rio::import(\"./datos/happyscore_income.csv\")\n\n#limpiar nombres\n\nfeliz <- janitor::clean_names(happy)\n\n#TABLA\n\ntabla_t <- feliz %>%\n           select(country, happy_score,avg_income,median_income,income_inequality)%>%\n           mutate(diferencia_media_mediana = avg_income-median_income, .before = income_inequality) %>%\n  mutate_if(is.numeric, funs(round(., 2)))\n\nDT::datatable(tabla_t)"
  },
  {
    "objectID": "my_trabajo_BigData.html#relación-entre-pib-y-felicidad",
    "href": "my_trabajo_BigData.html#relación-entre-pib-y-felicidad",
    "title": "La felicidad en relación a la renta",
    "section": "Relación entre PIB y felicidad",
    "text": "Relación entre PIB y felicidad\nAquí podemos ver la relación entre el PIB de los países y el índice de felicidad.\n\nCódigo\n#| echo:false\n\n#cargamos paquetes\n\n\nlibrary(rio)\nlibrary(tidyverse)\nlibrary(forcats)\nlibrary (ggthemes)\nlibrary(ggThemeAssist)\nlibrary(janitor)\nlibrary(dplyr)\nlibrary(plotly)\nlibrary(gganimate)\nlibrary(ggThemeAssist)\nlibrary(rnaturalearth)\nlibrary(rnaturalearthdata)\nlibrary(gapminder)\nlibrary(viridis)\nlibrary(highcharter)\nlibrary(treemapify)\nlibrary(treemap)\n\n#importamos los datos\n\n#fs::dir_create(\"datos\")\n\n#importamos los datos de la carpeta datos\n\nhappy <- rio::import(\"./datos/happyscore_income.csv\")\n\n#limpiar nombres\n\nfeliz <- janitor::clean_names(happy)\n\n#Hacemos la tabla\n\ntabla_2 <- feliz %>%\n  select (region, happy_score, gdp, country)\n\n#hacer gráfico_2.1\n\np2_1 <- ggplot(tabla_2 , aes(x = gdp, y = happy_score)) + geom_point(aes(color= region)) + geom_smooth()\n\n\np2_1 + theme(axis.title = element_text(family = \"AvantGarde\"),\n           plot.title = element_text(family = \"AvantGarde\", face = \"bold\"), panel.background = element_rect(fill = \"whitesmoke\",    linetype = \"dotted\")) + labs(title = \"ÍNDICE FELICIDAD EN RELACIÓN AL PIB\", x = \"PIB (0 - 1.6)\", y = \"Índice felicidad (2.5 - 8)\",colour = \"Regiones\") \n\n\n\n\n\n\n\nAhora por regiones\nAquí podemos observar el mismo gráfico que antes, pero subdividido por regiones para ver las distintas diferencias entre ellas y como se correlacinan de diferente manera\n\nCódigo\n#| echo:false\n\n\n#cargamos paquetes\n\n\nlibrary(rio)\nlibrary(tidyverse)\nlibrary(forcats)\nlibrary(ggthemes)\nlibrary(ggThemeAssist)\nlibrary(janitor)\nlibrary(dplyr)\nlibrary(plotly)\nlibrary(gganimate)\nlibrary(ggThemeAssist)\nlibrary(rnaturalearth)\nlibrary(rnaturalearthdata)\nlibrary(gapminder)\nlibrary(viridis)\nlibrary(highcharter)\nlibrary(treemapify)\nlibrary(treemap)\n\n#importamos los datos\n\n#fs::dir_create(\"datos\")\n\n#importamos los datos de la carpeta datos\n\nhappy <- rio::import(\"./datos/happyscore_income.csv\")\n\n#limpiar nombres\n\nfeliz <- janitor::clean_names(happy)\n\n#Segundo gráfico (facet por region)\n\n#Hacer tabla\n\n\ntabla_2 <- feliz %>%\n  select (region, happy_score, gdp, country)\n\n#hacer gráfico\n\np2 <- ggplot(tabla_2) +\n  geom_point(aes(x = gdp, y = happy_score, colour = region)) +\n  facet_wrap(vars(region))\n\n\np2 + theme(axis.title = element_text(family = \"AvantGarde\"),\n    plot.title = element_text(family = \"AvantGarde\",\n        face = \"bold\"), panel.background = element_rect(fill = \"whitesmoke\",\n        linetype = \"dotted\")) +labs(title = \"ÍNDICE FELICIDAD EN RELACIÓN AL PIB\",\n    x = \"PIB (0 - 1.6)\", y = \"Índice felicidad (2.5 - 8)\",\n    colour = \"Regiones\")"
  },
  {
    "objectID": "my_trabajo_BigData.html#mapa-de-la-desigualdad",
    "href": "my_trabajo_BigData.html#mapa-de-la-desigualdad",
    "title": "La felicidad en relación a la renta",
    "section": "Mapa de la desigualdad",
    "text": "Mapa de la desigualdad\n\nCódigo\n#| echo:false\n\n\nlibrary(rio)\nlibrary(tidyverse)\nlibrary(forcats)\nlibrary(ggthemes)\nlibrary(ggThemeAssist)\nlibrary(janitor)\nlibrary(dplyr)\nlibrary(plotly)\nlibrary(gganimate)\nlibrary(ggThemeAssist)\nlibrary(rnaturalearth)\nlibrary(rnaturalearthdata)\nlibrary(gapminder)\nlibrary(viridis)\nlibrary(highcharter)\nlibrary(treemapify)\nlibrary(treemap)\n\n\n#fs::dir_create(\"datos\")\n\n#importamos los datos de la carpeta datos\n\nhappy <- rio::import(\"./datos/happyscore_income.csv\")\n\n#limpiar nombres\n\nfeliz <- janitor::clean_names(happy)\n\n\n#MAPA 2\n\n#Hacer tabla\n\ntabla_m <- feliz %>%\n  select(country,income_inequality)\n\n#mapa\n\nworld <- rnaturalearth::ne_countries(scale = \"medium\", returnclass = \"sf\")\n\nworld <- world %>% filter(subregion != \"Antarctica\") %>% filter(admin != \"Greenland\")\n\nworld <- world %>% select(name, iso_a3, geometry)\n\ndf_world <- left_join(world, tabla_m, by = c(\"name\" = \"country\") ) %>%\n  #filter(!is.na(iso_a3)) %>%\n  mutate(income_inequality_4 = as_factor(ntile(income_inequality, 4)))\n\np3 <- ggplot(df_world) + geom_sf(aes(geometry = geometry, fill = income_inequality_4)) \n\n\np3 + theme(plot.title = element_text(family = \"mono\",\n                                     hjust = 0.5), panel.background = element_rect(fill = NA)) +labs(title = \"ÍNDICE DE DESIGUALDAD POR PAÍSES\", fill = \"Desigualdad \")"
  },
  {
    "objectID": "my_trabajo_BigData.html#mapa-de-la-felicidad",
    "href": "my_trabajo_BigData.html#mapa-de-la-felicidad",
    "title": "La felicidad en relación a la renta",
    "section": "Mapa de la felicidad",
    "text": "Mapa de la felicidad\nAhora vemos un mapa donde donde la leyenda nos muestra como siendo el 1 los países menos felices y los 4 los que más.\n\nCódigo\n#| echo:false\n\n\n#cargamos paquetes\n\n\nlibrary(rio)\nlibrary(tidyverse)\nlibrary(forcats)\nlibrary (ggthemes)\nlibrary(ggThemeAssist)\nlibrary(janitor)\nlibrary(dplyr)\nlibrary(plotly)\nlibrary(gganimate)\nlibrary(ggThemeAssist)\nlibrary(rnaturalearth)\nlibrary(rnaturalearthdata)\nlibrary(gapminder)\nlibrary(viridis)\nlibrary(highcharter)\nlibrary(treemapify)\nlibrary(treemap)\n\n#importamos los datos\n\n#fs::dir_create(\"datos\")\n\n#importamos los datos de la carpeta datos\n\nhappy <- rio::import(\"./datos/happyscore_income.csv\")\n\n#limpiar nombres\n\nfeliz <- janitor::clean_names(happy)\n\n#Tercer gráfico (mapa)\n\n#Hacer tabla\n\ntabla_3 <- feliz %>%\n           select(country,happy_score)\n\n#mapa\n\nworld <- rnaturalearth::ne_countries(scale = \"medium\", returnclass = \"sf\")\n\nworld <- world %>% filter(subregion != \"Antarctica\") %>% filter(admin != \"Greenland\")\n\nworld <- world %>% select(name, iso_a3, geometry)\n\ndf_world <- left_join(world, tabla_3, by = c(\"name\" = \"country\") ) %>%\n            #filter(!is.na(iso_a3)) %>%\n            mutate(happy_score_4 = as_factor(ntile(happy_score, 4)))\n\np3 <- ggplot(df_world) + geom_sf(aes(geometry = geometry, fill = happy_score_4)) \n\n\np3 + theme(plot.title = element_text(family = \"mono\",\n    hjust = 0.5), panel.background = element_rect(fill = NA)) +labs(title = \" ÍNDICE DE FELICIDAD POR PAÍSES\",\n    fill = \"Felicidad \") + scale_fill_viridis_d() \n\n\n\n\n\n\n\n\nCon esto acabo mi trabajo para BigData!!\n\n\n\n\n\n\nInformación sobre la sesión\nAbajo muestro mi entorno de trabajo y paquetes utilizados\n\n\n current session info \n\n─ Session info ───────────────────────────────────────────────────────────────\n setting  value\n version  R version 4.2.1 (2022-06-23 ucrt)\n os       Windows 10 x64 (build 19045)\n system   x86_64, mingw32\n ui       RTerm\n language (EN)\n collate  Spanish_Spain.utf8\n ctype    Spanish_Spain.utf8\n tz       Europe/Paris\n date     2023-01-12\n pandoc   2.18 @ C:/Program Files/RStudio/bin/quarto/bin/tools/ (via rmarkdown)\n\n─ Packages ───────────────────────────────────────────────────────────────────\n package           * version date (UTC) lib source\n assertthat          0.2.1   2019-03-21 [1] CRAN (R 4.2.1)\n backports           1.4.1   2021-12-13 [1] CRAN (R 4.2.0)\n broom               1.0.1   2022-08-29 [1] CRAN (R 4.2.1)\n bslib               0.4.0   2022-07-16 [1] CRAN (R 4.2.1)\n cachem              1.0.6   2021-08-19 [1] CRAN (R 4.2.1)\n cellranger          1.1.0   2016-07-27 [1] CRAN (R 4.2.1)\n class               7.3-20  2022-01-16 [2] CRAN (R 4.2.1)\n classInt            0.4-7   2022-06-10 [1] CRAN (R 4.2.1)\n cli                 3.4.0   2022-09-08 [1] CRAN (R 4.2.1)\n clipr               0.8.0   2022-02-22 [1] CRAN (R 4.2.1)\n colorspace          2.0-3   2022-02-21 [1] CRAN (R 4.2.1)\n crayon              1.5.1   2022-03-26 [1] CRAN (R 4.2.1)\n crosstalk           1.2.0   2021-11-04 [1] CRAN (R 4.2.1)\n curl                4.3.2   2021-06-23 [1] CRAN (R 4.2.1)\n data.table          1.14.2  2021-09-27 [1] CRAN (R 4.2.1)\n DBI                 1.1.3   2022-06-18 [1] CRAN (R 4.2.1)\n dbplyr              2.2.1   2022-06-27 [1] CRAN (R 4.2.1)\n desc                1.4.2   2022-09-08 [1] CRAN (R 4.2.1)\n details             0.3.0   2022-03-27 [1] CRAN (R 4.2.2)\n digest              0.6.29  2021-12-01 [1] CRAN (R 4.2.1)\n dplyr             * 1.0.10  2022-09-01 [1] CRAN (R 4.2.1)\n DT                  0.25    2022-09-12 [1] CRAN (R 4.2.1)\n e1071               1.7-11  2022-06-07 [1] CRAN (R 4.2.1)\n ellipsis            0.3.2   2021-04-29 [1] CRAN (R 4.2.1)\n evaluate            0.16    2022-08-09 [1] CRAN (R 4.2.1)\n fansi               1.0.3   2022-03-24 [1] CRAN (R 4.2.1)\n farver              2.1.1   2022-07-06 [1] CRAN (R 4.2.1)\n fastmap             1.1.0   2021-01-25 [1] CRAN (R 4.2.1)\n forcats           * 0.5.2   2022-08-19 [1] CRAN (R 4.2.1)\n foreign             0.8-82  2022-01-16 [2] CRAN (R 4.2.1)\n formatR             1.12    2022-03-31 [1] CRAN (R 4.2.1)\n fs                  1.5.2   2021-12-08 [1] CRAN (R 4.2.1)\n gapminder         * 0.3.0   2017-10-31 [1] CRAN (R 4.2.1)\n gargle              1.2.1   2022-09-08 [1] CRAN (R 4.2.1)\n generics            0.1.3   2022-07-05 [1] CRAN (R 4.2.1)\n gganimate         * 1.0.8   2022-09-08 [1] CRAN (R 4.2.2)\n ggfittext           0.9.1   2021-01-30 [1] CRAN (R 4.2.2)\n ggplot2           * 3.4.0   2022-11-04 [1] CRAN (R 4.2.2)\n ggThemeAssist     * 0.1.5   2016-08-13 [1] CRAN (R 4.2.1)\n ggthemes          * 4.2.4   2021-01-20 [1] CRAN (R 4.2.1)\n gifski              1.6.6-1 2022-04-05 [1] CRAN (R 4.2.1)\n glue                1.6.2   2022-02-24 [1] CRAN (R 4.2.1)\n googledrive         2.0.0   2021-07-08 [1] CRAN (R 4.2.1)\n googlesheets4       1.0.1   2022-08-13 [1] CRAN (R 4.2.1)\n gridBase            0.4-7   2014-02-24 [1] CRAN (R 4.2.2)\n gridExtra           2.3     2017-09-09 [1] CRAN (R 4.2.1)\n gtable              0.3.1   2022-09-01 [1] CRAN (R 4.2.1)\n haven               2.5.1   2022-08-22 [1] CRAN (R 4.2.1)\n highcharter       * 0.9.4   2022-01-03 [1] CRAN (R 4.2.2)\n hms                 1.1.2   2022-08-19 [1] CRAN (R 4.2.1)\n htmltools           0.5.3   2022-07-18 [1] CRAN (R 4.2.1)\n htmlwidgets         1.5.4   2021-09-08 [1] CRAN (R 4.2.1)\n httpuv              1.6.6   2022-09-08 [1] CRAN (R 4.2.1)\n httr                1.4.4   2022-08-17 [1] CRAN (R 4.2.1)\n igraph              1.3.5   2022-09-22 [1] CRAN (R 4.2.2)\n janitor           * 2.1.0   2021-01-05 [1] CRAN (R 4.2.1)\n jquerylib           0.1.4   2021-04-26 [1] CRAN (R 4.2.1)\n jsonlite            1.8.0   2022-02-22 [1] CRAN (R 4.2.1)\n KernSmooth          2.23-20 2021-05-03 [2] CRAN (R 4.2.1)\n knitr               1.40    2022-08-24 [1] CRAN (R 4.2.1)\n labeling            0.4.2   2020-10-20 [1] CRAN (R 4.2.0)\n later               1.3.0   2021-08-18 [1] CRAN (R 4.2.1)\n lattice             0.20-45 2021-09-22 [2] CRAN (R 4.2.1)\n lazyeval            0.2.2   2019-03-15 [1] CRAN (R 4.2.1)\n lifecycle           1.0.3   2022-10-07 [1] CRAN (R 4.2.2)\n lubridate           1.8.0   2021-10-07 [1] CRAN (R 4.2.1)\n magrittr            2.0.3   2022-03-30 [1] CRAN (R 4.2.1)\n Matrix              1.5-0   2022-09-10 [1] CRAN (R 4.2.1)\n mgcv                1.8-40  2022-03-29 [2] CRAN (R 4.2.1)\n mime                0.12    2021-09-28 [1] CRAN (R 4.2.0)\n miniUI              0.1.1.1 2018-05-18 [1] CRAN (R 4.2.1)\n modelr              0.1.9   2022-08-19 [1] CRAN (R 4.2.1)\n munsell             0.5.0   2018-06-12 [1] CRAN (R 4.2.1)\n nlme                3.1-157 2022-03-25 [2] CRAN (R 4.2.1)\n openxlsx            4.2.5   2021-12-14 [1] CRAN (R 4.2.1)\n pillar              1.8.1   2022-08-19 [1] CRAN (R 4.2.1)\n pkgconfig           2.0.3   2019-09-22 [1] CRAN (R 4.2.1)\n plotly            * 4.10.0  2021-10-09 [1] CRAN (R 4.2.1)\n png                 0.1-7   2013-12-03 [1] CRAN (R 4.2.0)\n prettyunits         1.1.1   2020-01-24 [1] CRAN (R 4.2.1)\n progress            1.2.2   2019-05-16 [1] CRAN (R 4.2.1)\n promises            1.2.0.1 2021-02-11 [1] CRAN (R 4.2.1)\n proxy               0.4-27  2022-06-09 [1] CRAN (R 4.2.1)\n purrr             * 0.3.4   2020-04-17 [1] CRAN (R 4.2.1)\n quantmod            0.4.20  2022-04-29 [1] CRAN (R 4.2.2)\n R6                  2.5.1   2021-08-19 [1] CRAN (R 4.2.1)\n RColorBrewer        1.1-3   2022-04-03 [1] CRAN (R 4.2.0)\n Rcpp                1.0.9   2022-07-08 [1] CRAN (R 4.2.1)\n readr             * 2.1.2   2022-01-30 [1] CRAN (R 4.2.1)\n readxl              1.4.1   2022-08-17 [1] CRAN (R 4.2.1)\n reprex              2.0.2   2022-08-17 [1] CRAN (R 4.2.1)\n rio               * 0.5.29  2021-11-22 [1] CRAN (R 4.2.1)\n rlang               1.0.6   2022-09-24 [1] CRAN (R 4.2.2)\n rlist               0.4.6.2 2021-09-03 [1] CRAN (R 4.2.2)\n rmarkdown           2.16    2022-08-24 [1] CRAN (R 4.2.1)\n rnaturalearth     * 0.1.0   2017-03-21 [1] CRAN (R 4.2.2)\n rnaturalearthdata * 0.1.0   2017-02-21 [1] CRAN (R 4.2.2)\n rprojroot           2.0.3   2022-04-02 [1] CRAN (R 4.2.1)\n rstudioapi          0.14    2022-08-22 [1] CRAN (R 4.2.1)\n rvest               1.0.3   2022-08-19 [1] CRAN (R 4.2.1)\n s2                  1.1.0   2022-07-18 [1] CRAN (R 4.2.1)\n sass                0.4.2   2022-07-16 [1] CRAN (R 4.2.1)\n scales              1.2.1   2022-08-20 [1] CRAN (R 4.2.2)\n sessioninfo         1.2.2   2021-12-06 [1] CRAN (R 4.2.1)\n sf                  1.0-8   2022-07-14 [1] CRAN (R 4.2.1)\n shiny               1.7.2   2022-07-19 [1] CRAN (R 4.2.1)\n snakecase           0.11.0  2019-05-25 [1] CRAN (R 4.2.1)\n sp                  1.5-0   2022-06-05 [1] CRAN (R 4.2.1)\n stringi             1.7.8   2022-07-11 [1] CRAN (R 4.2.1)\n stringr           * 1.4.1   2022-08-20 [1] CRAN (R 4.2.1)\n tibble            * 3.1.8   2022-07-22 [1] CRAN (R 4.2.1)\n tidyr             * 1.2.1   2022-09-08 [1] CRAN (R 4.2.1)\n tidyselect          1.2.0   2022-10-10 [1] CRAN (R 4.2.2)\n tidyverse         * 1.3.2   2022-07-18 [1] CRAN (R 4.2.2)\n treemap           * 2.4-3   2021-08-22 [1] CRAN (R 4.2.2)\n treemapify        * 2.5.5   2021-01-08 [1] CRAN (R 4.2.2)\n TTR                 0.24.3  2021-12-12 [1] CRAN (R 4.2.2)\n tweenr              2.0.2   2022-09-06 [1] CRAN (R 4.2.2)\n tzdb                0.3.0   2022-03-28 [1] CRAN (R 4.2.1)\n units               0.8-0   2022-02-05 [1] CRAN (R 4.2.1)\n utf8                1.2.2   2021-07-24 [1] CRAN (R 4.2.1)\n vctrs               0.5.0   2022-10-22 [1] CRAN (R 4.2.2)\n viridis           * 0.6.2   2021-10-13 [1] CRAN (R 4.2.2)\n viridisLite       * 0.4.1   2022-08-22 [1] CRAN (R 4.2.1)\n withr               2.5.0   2022-03-03 [1] CRAN (R 4.2.1)\n wk                  0.6.0   2022-01-03 [1] CRAN (R 4.2.1)\n xfun                0.32    2022-08-10 [1] CRAN (R 4.2.1)\n xml2                1.3.3   2021-11-30 [1] CRAN (R 4.2.1)\n xtable              1.8-4   2019-04-21 [1] CRAN (R 4.2.1)\n xts                 0.12.2  2022-10-16 [1] CRAN (R 4.2.2)\n yaml                2.3.5   2022-02-21 [1] CRAN (R 4.2.1)\n zip                 2.2.1   2022-09-08 [1] CRAN (R 4.2.1)\n zoo                 1.8-11  2022-09-17 [1] CRAN (R 4.2.2)\n\n [1] C:/Users/Usuario/AppData/Local/R/win-library/4.2\n [2] C:/Program Files/R/R-4.2.1/library\n\n──────────────────────────────────────────────────────────────────────────────"
  },
  {
    "objectID": "my_trabajo_BigData.html#los-datos-en-números",
    "href": "my_trabajo_BigData.html#los-datos-en-números",
    "title": "La felicidad en relación a la renta",
    "section": "Los datos en números",
    "text": "Los datos en números\nEn la siguiente tabla podemos ver parte de los datos en los que se basa el estudio, de izquierda a derecha nos encontramos con los países en primer lugar, seguido del índice de felicidad (escala 0-7.5), media de los ingresos (escala 0-30.000), mediana de los ingresos y desigualdad de ingreso (escala 20-65). Además podemos ver la diferencia entre la media y la mediana para ver como de “fiable” es la media y que no se encuentre desvirtuada por un número reducido de grandes rentas que eleve la media. Analizando un poco la tabla vemos como los países con menor índice de felicidad, son países con rentas muy bajas, pero aunque guarden una correlación positiva, cabe destacar que esto no implica causalidad, ya que por otro lado podemos observar como Costa Rica, con una media de ingresos bastante baja, es uno de los países con mayor índice de felicidad, o en el otro extremo podemos ver Luxemburgo, donde pese a poseer la media de ingresos más eleveados ni siquiera llega a un 7 en el índice de felicidad. Así que, resumiendo, pese que haya fuertes correlaciones entre diferentes variables, siempre hay que tener en cuenta otros factores a la hora de analizar las causas, en este caso del índice de felicidad, y explicarlas correctamente.\n\nCódigo\n#| echo:false\n\nlibrary(rio)\nlibrary(tidyverse)\nlibrary(forcats)\nlibrary(ggthemes)\nlibrary(ggThemeAssist)\nlibrary(janitor)\nlibrary(dplyr)\nlibrary(plotly)\nlibrary(gganimate)\nlibrary(ggThemeAssist)\nlibrary(rnaturalearth)\nlibrary(rnaturalearthdata)\nlibrary(gapminder)\nlibrary(viridis)\nlibrary(highcharter)\nlibrary(treemapify)\nlibrary(treemap)\n\n\n#fs::dir_create(\"datos\")\n\n#importamos los datos de la carpeta datos\n\nhappy <- rio::import(\"./datos/happyscore_income.csv\")\n\n#limpiar nombres\n\nfeliz <- janitor::clean_names(happy)\n\n#TABLA\n\ntabla_t <- feliz %>%\n           select(country, happy_score,avg_income,median_income,income_inequality)%>%\n           mutate(diferencia_media_mediana = avg_income-median_income, .before = income_inequality) %>%\n  mutate_if(is.numeric, funs(round(., 2)))\n\nDT::datatable(tabla_t)"
  },
  {
    "objectID": "my_trabajo_BigData.html#correlación-entre-pib-y-felicidad",
    "href": "my_trabajo_BigData.html#correlación-entre-pib-y-felicidad",
    "title": "La felicidad en relación a la renta",
    "section": "Correlación entre PIB y felicidad",
    "text": "Correlación entre PIB y felicidad\nTal como veníamos hablando, existe una correlación positiva entre el nivel de ingresos y la felicidad, y la mejor forma de entenderlo es viéndolo. En el siguiente gráfico podemos observar como a medida que aumenta el PIB de los países, aumenta también el índice de felicidad. Por lo que, aunque sí es cierto que hay diferentes factores que explican el ratio de felicidad y no solo nos podemos centrar en una variable explicativa, existe una tendencia clara entre el PIB y la felicidad, es decir, un PIB mayor y todo lo que eso conlleva, mejor educación; mejores sistemas sanitarios; mejores infraestructuras o mayores oportunidades laborales; etc, hace que el índice de felicidad aumente a medida que aumenta el PIB. Obviamente no será esta variable la única causa explicativa, ya que, por ejemplo, podrán haber países con PIB muy elevados pero que en cambio existan grandes desigualdades.\n\nCódigo\n#| echo:false\n\n#cargamos paquetes\n\n\nlibrary(rio)\nlibrary(tidyverse)\nlibrary(forcats)\nlibrary (ggthemes)\nlibrary(ggThemeAssist)\nlibrary(janitor)\nlibrary(dplyr)\nlibrary(plotly)\nlibrary(gganimate)\nlibrary(ggThemeAssist)\nlibrary(rnaturalearth)\nlibrary(rnaturalearthdata)\nlibrary(gapminder)\nlibrary(viridis)\nlibrary(highcharter)\nlibrary(treemapify)\nlibrary(treemap)\n\n#importamos los datos\n\n#fs::dir_create(\"datos\")\n\n#importamos los datos de la carpeta datos\n\nhappy <- rio::import(\"./datos/happyscore_income.csv\")\n\n#limpiar nombres\n\nfeliz <- janitor::clean_names(happy)\n\n#Hacemos la tabla\n\ntabla_2 <- feliz %>%\n  select (region, happy_score, gdp, country)\n\n#hacer gráfico_2.1\n\np2_1 <- ggplot(tabla_2 , aes(x = gdp, y = happy_score)) + geom_point(aes(color= region)) + geom_smooth()\n\n\np2_1 + theme(axis.title = element_text(family = \"AvantGarde\"),\n           plot.title = element_text(family = \"AvantGarde\", face = \"bold\"), panel.background = element_rect(fill = \"whitesmoke\",    linetype = \"dotted\")) + labs(title = \"ÍNDICE FELICIDAD EN RELACIÓN AL PIB\", x = \"PIB (0 - 1.6)\", y = \"Índice felicidad (2.5 - 8)\",colour = \"Regiones\") \n\n\n\n\n\n\n\nAhora por regiones\nSiguiendo con la línea de la correlación entre PIB y felicidad, en el siguiente gráfico podemos ver lo mismo que en el de arriba pero dividido por regiones para poder ver con mayor detalle la correlación que hay entre el PIB y el índice de felicidad en cada región. Separando el gráfico por regiones podemos observar por ejemplo como en la región de Europa Occidental un aumento del PIB supone un aumento mayor al proporcional de la felicidad. Tambíen vemos otro caso llamativo, que es la región de Asia del Sur(“Southern Asia”), donde precisamente en esta región existe una correlación negativa, pues a medida que aumenta el PIB disminuye la felicidad, esto nos muestra el ejemplo perfecto de que aunque hayamos visto en el otro gráfico que existía una correlación general positiva, esta no explica causalidad, ya que Asia del Sur rompe así la hipótesis de que el PIB sea el causante directo, o única varible explicativa, del aumento de la felicidad.\n\nCódigo\n#| echo:false\n\n\n#cargamos paquetes\n\n\nlibrary(rio)\nlibrary(tidyverse)\nlibrary(forcats)\nlibrary(ggthemes)\nlibrary(ggThemeAssist)\nlibrary(janitor)\nlibrary(dplyr)\nlibrary(plotly)\nlibrary(gganimate)\nlibrary(ggThemeAssist)\nlibrary(rnaturalearth)\nlibrary(rnaturalearthdata)\nlibrary(gapminder)\nlibrary(viridis)\nlibrary(highcharter)\nlibrary(treemapify)\nlibrary(treemap)\n\n#importamos los datos\n\n#fs::dir_create(\"datos\")\n\n#importamos los datos de la carpeta datos\n\nhappy <- rio::import(\"./datos/happyscore_income.csv\")\n\n#limpiar nombres\n\nfeliz <- janitor::clean_names(happy)\n\n#Segundo gráfico (facet por region)\n\n#Hacer tabla\n\n\ntabla_2 <- feliz %>%\n  select (region, happy_score, gdp, country)\n\n#hacer gráfico\n\np2 <- ggplot(tabla_2) +\n  geom_point(aes(x = gdp, y = happy_score, colour = region)) +\n  facet_wrap(vars(region))\n\n\np2 + theme(axis.title = element_text(family = \"AvantGarde\"),\n    plot.title = element_text(family = \"AvantGarde\",\n        face = \"bold\"), panel.background = element_rect(fill = \"whitesmoke\",\n        linetype = \"dotted\")) +labs(title = \"ÍNDICE FELICIDAD EN RELACIÓN AL PIB\",\n    x = \"PIB (0 - 1.6)\", y = \"Índice felicidad (2.5 - 8)\",\n    colour = \"Regiones\")"
  },
  {
    "objectID": "my_trabajo_BigData.html#desigualdad-y-felicidad-por-países",
    "href": "my_trabajo_BigData.html#desigualdad-y-felicidad-por-países",
    "title": "La felicidad en relación a la renta",
    "section": "Desigualdad y felicidad por países",
    "text": "Desigualdad y felicidad por países\nComo veníamos diciendo el PIB no puede determinar de forma aislada el índice de felicidad, puesto que hay otros causantes, como la desigualdad, que también pueden explicar los distintos niveles de felicidad. En el siguiente mapa se pueden ver los índices de desigualdad por países agrupados en cuatro niveles según el grado de desigualdad en una escala de 1 a 4, donde los países pertenecientes al primer grupo son los países con menor desigualdad de ingresos, siendo el cuarto grupo el que nos indica los países con mayores desigualdades. Si comparamos con el mapa de la felicidad, el cual también está agrupado por niveles de felicidad en una escala del 1 al 4, donde los países del nivel uno tienen los índices de felicidad más bajos y los países de nivel cuatro los que mayor índice tienen, podemos observar, por ejemplo, correlaciones positivas entre los países nórdicos donde índices muy bajos de desigualdad implican niveles muy altos de felicidad. En cambio toda la región de América tiene unos índices elevados de forma generalizada y en cambio también tiene unos índices altos de desigualdad, por lo que deja de haber una correlación positiva.\n\nCódigo\n#| echo:false\n\n\nlibrary(rio)\nlibrary(tidyverse)\nlibrary(forcats)\nlibrary(ggthemes)\nlibrary(ggThemeAssist)\nlibrary(janitor)\nlibrary(dplyr)\nlibrary(plotly)\nlibrary(gganimate)\nlibrary(ggThemeAssist)\nlibrary(rnaturalearth)\nlibrary(rnaturalearthdata)\nlibrary(gapminder)\nlibrary(viridis)\nlibrary(highcharter)\nlibrary(treemapify)\nlibrary(treemap)\n\n\n#fs::dir_create(\"datos\")\n\n#importamos los datos de la carpeta datos\n\nhappy <- rio::import(\"./datos/happyscore_income.csv\")\n\n#limpiar nombres\n\nfeliz <- janitor::clean_names(happy)\n\n\n#MAPA 2\n\n#Hacer tabla\n\ntabla_m <- feliz %>%\n  select(country,income_inequality)\n\n#mapa\n\nworld <- rnaturalearth::ne_countries(scale = \"medium\", returnclass = \"sf\")\n\nworld <- world %>% filter(subregion != \"Antarctica\") %>% filter(admin != \"Greenland\")\n\nworld <- world %>% select(name, iso_a3, geometry)\n\ndf_world <- left_join(world, tabla_m, by = c(\"name\" = \"country\") ) %>%\n  #filter(!is.na(iso_a3)) %>%\n  mutate(income_inequality_4 = as_factor(ntile(income_inequality, 4)))\n\np3 <- ggplot(df_world) + geom_sf(aes(geometry = geometry, fill = income_inequality_4)) \n\n\np3 + theme(plot.title = element_text(family = \"mono\",\n                                     hjust = 0.5), panel.background = element_rect(fill = NA)) +labs(title = \"ÍNDICE DE DESIGUALDAD POR PAÍSES\", fill = \"Desigualdad \") \n\n#mapa felicidad\n\ntabla_3 <- feliz %>%\n           select(country,happy_score)\n\n#mapa\n\nworld <- rnaturalearth::ne_countries(scale = \"medium\", returnclass = \"sf\")\n\nworld <- world %>% filter(subregion != \"Antarctica\") %>% filter(admin != \"Greenland\")\n\nworld <- world %>% select(name, iso_a3, geometry)\n\ndf_world <- left_join(world, tabla_3, by = c(\"name\" = \"country\") ) %>%\n            #filter(!is.na(iso_a3)) %>%\n            mutate(happy_score_4 = as_factor(ntile(happy_score, 4)))\n\np3 <- ggplot(df_world) + geom_sf(aes(geometry = geometry, fill = happy_score_4)) \n\n\np3 + theme(plot.title = element_text(family = \"mono\",\n    hjust = 0.5), panel.background = element_rect(fill = NA)) +labs(title = \" ÍNDICE DE FELICIDAD POR PAÍSES\",\n    fill = \"Felicidad \") + scale_fill_viridis_d()"
  }
]